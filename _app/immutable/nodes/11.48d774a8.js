import{O as Dt,s as Me,e as be,i as F,d as b,r as re,a as ee,u as se,h as B,c as te,j as u,w as E,y as he,P as Ce,A as Te,z as Re,I as Ge,Q as Nt,M as At,f as D,g as N,k as L,x as We,l as ue,m as ce,n as Se,p as Ze,E as Ye,D as Ve,v as He,N as Ut,J as Ft,o as Qt,R as nt,S as Xt}from"../chunks/scheduler.123ed526.js";import{S as qe,i as De,g as Oe,c as Ie,a as U,t as $,b as _e,d as ge,m as me,h as ve,e as pe,f as Je}from"../chunks/index.3f7f7540.js";import{e as ae,u as Gt,o as Zt}from"../chunks/each.d23818b1.js";import{p as Yt}from"../chunks/stores.4272306f.js";import{c as Jt,a as Kt}from"../chunks/search-util.f927a919.js";import{e as xt}from"../chunks/singletons.e7de2ece.js";import{g as xe,h as rt,m as $t,d as el,a as tl,D as st,b as ll}from"../chunks/tree-loading.0da160c4.js";import{g as il,a as nl}from"../chunks/spread.8a54911c.js";import{f as ke}from"../chunks/index.453d5244.js";import{B as tt}from"../chunks/BrokenFittedText.52419962.js";import{a as rl}from"../chunks/style-util.8011bb2c.js";import{g as sl}from"../chunks/visual-util.89ddd773.js";import{P as fl}from"../chunks/PathLevelInfoBox.0986d362.js";function Pt(){return Dt()}function Be(e,t,l,n,s){return()=>{e("ti",{path:l,action:t,topLeftCorner:{x:n,y:s}})}}function ft(e,t){return()=>{e("ce",{ind:t})}}function ot(e,t,l){const n=e.slice();return n[44]=t[l].id,n[45]=t[l].cachedProps,n[46]=t[l].vizInfo,n[47]=t[l].childNode,n}function at(e,t,l){const n=e.slice();return n[50]=t[l][0],n[51]=t[l][1],n}function ht(e){let t,l,n;return{c(){t=re("stop"),this.h()},l(s){t=se(s,"stop",{offset:!0,"stop-opacity":!0,"stop-color":!0,class:!0}),B(t).forEach(b),this.h()},h(){u(t,"offset",e[50]+"%"),u(t,"stop-opacity",l=e[47].isSelected?"80%":`${e[51]}%`),u(t,"stop-color",n=e[46].colorStr),u(t,"class","svelte-1cwbp37")},m(s,r){F(s,t,r)},p(s,r){r[0]&32768&&l!==(l=s[47].isSelected?"80%":`${s[51]}%`)&&u(t,"stop-opacity",l),r[0]&32768&&n!==(n=s[46].colorStr)&&u(t,"stop-color",n)},d(s){s&&b(t)}}}function ut(e){let t,l;const n=[e[45],{qcSpec:e[0]},{attributeLabels:e[1]},{visibleTreeInfo:e[2]},{selectionState:e[3]},{levelVisuals:e[4]},{treeWidth:e[5]},{treeXOffset:e[9]},{childHeightRate:e[6]},{overHangRate:e[7]},{preStraightRate:e[8]},{childBaseWidth:e[10]},{linkSurfaceRate:e[11]},{childrenInternalMargin:e[12]},{parentSideMargin:0}];let s={};for(let r=0;r<n.length;r+=1)s=At(s,n[r]);return t=new jt({props:s}),t.$on("ti",e[35]),{c(){_e(t.$$.fragment)},l(r){ge(t.$$.fragment,r)},m(r,i){me(t,r,i),l=!0},p(r,i){const o=i[0]&40959?il(n,[i[0]&32768&&nl(r[45]),i[0]&1&&{qcSpec:r[0]},i[0]&2&&{attributeLabels:r[1]},i[0]&4&&{visibleTreeInfo:r[2]},i[0]&8&&{selectionState:r[3]},i[0]&16&&{levelVisuals:r[4]},i[0]&32&&{treeWidth:r[5]},i[0]&512&&{treeXOffset:r[9]},i[0]&64&&{childHeightRate:r[6]},i[0]&128&&{overHangRate:r[7]},i[0]&256&&{preStraightRate:r[8]},i[0]&1024&&{childBaseWidth:r[10]},i[0]&2048&&{linkSurfaceRate:r[11]},i[0]&4096&&{childrenInternalMargin:r[12]},n[14]]):{};t.$set(o)},i(r){l||(U(t.$$.fragment,r),l=!0)},o(r){$(t.$$.fragment,r),l=!1},d(r){pe(t,r)}}}function ct(e,t){let l,n,s,r,i,o,f,h,c,a,_,S,m,H,W,Q,j,V,O,z=ae([[0,5],[20,15],[50,25]]),I=[];for(let v=0;v<3;v+=1)I[v]=ht(at(t,z,v));a=new tt({props:{text:t[47].name,width:t[46].width*.64,height:t[13]*.9,y:t[16]-t[13]*.05,x:t[45].xOffset+t[46].width*.18}});let p=t[47].children&&ut(t);return{key:e,first:null,c(){l=re("defs"),n=re("linearGradient");for(let v=0;v<3;v+=1)I[v].c();r=ee(),i=re("path"),c=ee(),_e(a.$$.fragment),_=ee(),S=re("rect"),W=ee(),p&&p.c(),Q=be(),this.h()},l(v){l=se(v,"defs",{});var T=B(l);n=se(T,"linearGradient",{id:!0,gradientTransform:!0});var Y=B(n);for(let C=0;C<3;C+=1)I[C].l(Y);Y.forEach(b),T.forEach(b),r=te(v),i=se(v,"path",{d:!0,fill:!0,class:!0}),B(i).forEach(b),c=te(v),ge(a.$$.fragment,v),_=te(v),S=se(v,"rect",{x:!0,y:!0,"fill-opacity":!0,height:!0,width:!0,class:!0}),B(S).forEach(b),W=te(v),p&&p.l(v),Q=be(),this.h()},h(){u(n,"id",s="path-grad-"+t[46].strId),u(n,"gradientTransform","rotate(90)"),u(i,"d",o=t[46].linkPath),u(i,"fill",f="url('#path-grad-"+t[46].strId+"')"),u(i,"class","svelte-1cwbp37"),u(S,"x",m=t[45].xOffset),u(S,"y",t[14]),u(S,"fill-opacity","0"),u(S,"height",t[13]),u(S,"width",H=t[46].width),u(S,"class","svelte-1cwbp37"),this.first=l},m(v,T){F(v,l,T),E(l,n);for(let Y=0;Y<3;Y+=1)I[Y]&&I[Y].m(n,null);F(v,r,T),F(v,i,T),F(v,c,T),me(a,v,T),F(v,_,T),F(v,S,T),F(v,W,T),p&&p.m(v,T),F(v,Q,T),j=!0,V||(O=[he(S,"mouseover",function(){Ce(Be(t[17],"highlight",t[45].pathInCompleteTree,t[45].xOffset+t[45].width/2,t[14]))&&Be(t[17],"highlight",t[45].pathInCompleteTree,t[45].xOffset+t[45].width/2,t[14]).apply(this,arguments)}),he(S,"mouseleave",function(){Ce(Be(t[17],"de-highlight",t[45].pathInCompleteTree,0,0))&&Be(t[17],"de-highlight",t[45].pathInCompleteTree,0,0).apply(this,arguments)}),he(S,"click",function(){Ce(Be(t[17],"toggle-select",t[45].pathInCompleteTree,0,0))&&Be(t[17],"toggle-select",t[45].pathInCompleteTree,0,0).apply(this,arguments)})],V=!0)},p(v,T){if(t=v,T[0]&32768){z=ae([[0,5],[20,15],[50,25]]);let C;for(C=0;C<3;C+=1){const y=at(t,z,C);I[C]?I[C].p(y,T):(I[C]=ht(y),I[C].c(),I[C].m(n,null))}for(;C<3;C+=1)I[C].d(1)}(!j||T[0]&32768&&s!==(s="path-grad-"+t[46].strId))&&u(n,"id",s),(!j||T[0]&32768&&o!==(o=t[46].linkPath))&&u(i,"d",o),(!j||T[0]&32768&&f!==(f="url('#path-grad-"+t[46].strId+"')"))&&u(i,"fill",f);const Y={};T[0]&32768&&(Y.text=t[47].name),T[0]&32768&&(Y.width=t[46].width*.64),T[0]&8192&&(Y.height=t[13]*.9),T[0]&73728&&(Y.y=t[16]-t[13]*.05),T[0]&32768&&(Y.x=t[45].xOffset+t[46].width*.18),a.$set(Y),(!j||T[0]&32768&&m!==(m=t[45].xOffset))&&u(S,"x",m),(!j||T[0]&16384)&&u(S,"y",t[14]),(!j||T[0]&8192)&&u(S,"height",t[13]),(!j||T[0]&32768&&H!==(H=t[46].width))&&u(S,"width",H),t[47].children?p?(p.p(t,T),T[0]&32768&&U(p,1)):(p=ut(t),p.c(),U(p,1),p.m(Q.parentNode,Q)):p&&(Oe(),$(p,1,1,()=>{p=null}),Ie())},i(v){j||(v&&Te(()=>{j&&(h||(h=ve(i,ke,{duration:300},!0)),h.run(1))}),U(a.$$.fragment,v),U(p),j=!0)},o(v){v&&(h||(h=ve(i,ke,{duration:300},!1)),h.run(0)),$(a.$$.fragment,v),$(p),j=!1},d(v){v&&(b(l),b(r),b(i),b(c),b(_),b(S),b(W),b(Q)),Re(I,v),v&&h&&h.end(),pe(a,v),p&&p.d(v),V=!1,Ge(O)}}}function ol(e){let t=[],l=new Map,n,s,r=ae(e[15]);const i=o=>o[44];for(let o=0;o<r.length;o+=1){let f=ot(e,r,o),h=i(f);l.set(h,t[o]=ct(h,f))}return{c(){for(let o=0;o<t.length;o+=1)t[o].c();n=be()},l(o){for(let f=0;f<t.length;f+=1)t[f].l(o);n=be()},m(o,f){for(let h=0;h<t.length;h+=1)t[h]&&t[h].m(o,f);F(o,n,f),s=!0},p(o,f){f[0]&262143&&(r=ae(o[15]),Oe(),t=Gt(t,f,i,1,o,r,l,n.parentNode,Zt,ct,n,ot),Ie())},i(o){if(!s){for(let f=0;f<r.length;f+=1)U(t[f]);s=!0}},o(o){for(let f=0;f<t.length;f+=1)$(t[f]);s=!1},d(o){o&&b(n);for(let f=0;f<t.length;f+=1)t[f].d(o)}}}function dt(e,t,l,n,s,r,i){const o=c=>s*(c||0)/r,f=n+o(t),h=e+((l==null?void 0:l.rank)||0)*(n+i)+o(l==null?void 0:l.weight);return{width:f,xOffset:h}}function al(e,t,l){let n,s,r,i,o,f,h,c,a,_,S,m,H,W,Q,j,V,O,z,I,{qcSpec:p}=t,{attributeLabels:v}=t,{visibleTreeInfo:T}=t,{selectionState:Y}=t,{levelVisuals:C=[]}=t,{pathInCompleteTree:y=[]}=t,{branchReachBack:X=0}=t,{rootWidth:J=30}=t,{treeWidth:K=70}=t,{childHeightRate:M=.2}=t,{overHangRate:G=.05}=t,{preStraightRate:w=.05}=t,{treeXOffset:ie=0}=t,{childBaseWidth:g=2.9}=t,{linkSurfaceRate:k=.8}=t,{childrenInternalMargin:Z=.9}=t,{parentSideMargin:A=.8}=t,{width:le=J}=t,{xOffset:oe=(K-J)/2+ie}=t;const q=Pt(),ne=R=>R===void 0?0:R;function Pe(R,fe){var it;const d={pathInCompleteTree:[...y,R],...dt(ie,fe.weight,fe==null?void 0:fe.totalOffsetOnLevel,g,z,((it=T.meta[s])==null?void 0:it.totalWeight)||1,Z)},P=dt(oe+A,fe.weight,fe==null?void 0:fe.totalOffsetAmongSiblings,O,j*(i>1?k:1)-O*i,(r==null?void 0:r.childrenSumWeight)||1,V),x={parent:P.width,child:d.width},Ee={x:P.xOffset,y:m},de={x:d.xOffset,y:H},Mt=a+(fe.isSelected?S:0),qt=sl(Ee,de,x,Mt,Q);return{id:R,cachedProps:d,vizInfo:{linkPath:qt,width:x.child,colorStr:rl(fe.scaleEnds.mid),strId:d.pathInCompleteTree.join("-")},childNode:fe}}function je(R,fe){return Object.entries((R==null?void 0:R.children)||{}).map(([d,P])=>Pe(d,P))}function ze(R){Nt.call(this,e,R)}return e.$$set=R=>{"qcSpec"in R&&l(0,p=R.qcSpec),"attributeLabels"in R&&l(1,v=R.attributeLabels),"visibleTreeInfo"in R&&l(2,T=R.visibleTreeInfo),"selectionState"in R&&l(3,Y=R.selectionState),"levelVisuals"in R&&l(4,C=R.levelVisuals),"pathInCompleteTree"in R&&l(18,y=R.pathInCompleteTree),"branchReachBack"in R&&l(19,X=R.branchReachBack),"rootWidth"in R&&l(20,J=R.rootWidth),"treeWidth"in R&&l(5,K=R.treeWidth),"childHeightRate"in R&&l(6,M=R.childHeightRate),"overHangRate"in R&&l(7,G=R.overHangRate),"preStraightRate"in R&&l(8,w=R.preStraightRate),"treeXOffset"in R&&l(9,ie=R.treeXOffset),"childBaseWidth"in R&&l(10,g=R.childBaseWidth),"linkSurfaceRate"in R&&l(11,k=R.linkSurfaceRate),"childrenInternalMargin"in R&&l(12,Z=R.childrenInternalMargin),"parentSideMargin"in R&&l(21,A=R.parentSideMargin),"width"in R&&l(22,le=R.width),"xOffset"in R&&l(23,oe=R.xOffset)},e.$$.update=()=>{var R;e.$$.dirty[0]&262144&&l(34,n=y.length),e.$$.dirty[1]&8&&l(29,s=n+1),e.$$.dirty[0]&262148&&l(25,r=xe(y,T.tree)),e.$$.dirty[0]&33554432&&l(27,i=Object.keys((r==null?void 0:r.children)||{}).length),e.$$.dirty[0]&16|e.$$.dirty[1]&8&&l(24,o=C[n]),e.$$.dirty[0]&536870916&&l(30,f=((R=T.meta[s])==null?void 0:R.totalNodes)||0),e.$$.dirty[0]&16777216&&l(33,h=ne(o==null?void 0:o.topOffset)),e.$$.dirty[0]&16777664&&l(32,[c,a,_,S]=[1-M-w-G,M,w,G].map(fe=>ne((o==null?void 0:o.totalSize)*fe)),c,(l(13,a),l(6,M),l(8,w),l(7,G),l(24,o),l(4,C),l(34,n),l(18,y)),(l(31,_),l(6,M),l(8,w),l(7,G),l(24,o),l(4,C),l(34,n),l(18,y))),e.$$.dirty[1]&5&&l(26,m=h+_),e.$$.dirty[0]&67108864|e.$$.dirty[1]&2&&l(14,H=m+c),e.$$.dirty[0]&24576&&l(16,W=H+a),e.$$.dirty[0]&524288|e.$$.dirty[1]&1&&(Q=X+_),e.$$.dirty[0]&6291456&&l(28,j=le-2*A),e.$$.dirty[0]&402655232&&(V=j*(1-k)/(i>1?i-1:1)),e.$$.dirty[0]&402655232&&(O=j*k/(i*1.8)),e.$$.dirty[0]&1073746976&&(z=K-g*f-Z*(f-1)),e.$$.dirty[0]&50331648&&l(15,I=je(r))},[p,v,T,Y,C,K,M,G,w,ie,g,k,Z,a,H,I,W,q,y,X,J,A,le,oe,o,r,m,i,j,s,f,_,c,h,n,ze]}class jt extends qe{constructor(t){super(),De(this,t,al,ol,Me,{qcSpec:0,attributeLabels:1,visibleTreeInfo:2,selectionState:3,levelVisuals:4,pathInCompleteTree:18,branchReachBack:19,rootWidth:20,treeWidth:5,childHeightRate:6,overHangRate:7,preStraightRate:8,treeXOffset:9,childBaseWidth:10,linkSurfaceRate:11,childrenInternalMargin:12,parentSideMargin:21,width:22,xOffset:23},null,[-1,-1])}}function _t(e,t,l){const n=e.slice();return n[11]=t[l],n}function gt(e){let t,l=e[11]+"",n,s;return{c(){t=D("div"),n=ue(l),s=ee(),this.h()},l(r){t=N(r,"DIV",{class:!0});var i=B(t);n=ce(i,l),i.forEach(b),s=te(r),this.h()},h(){u(t,"class","svelte-6fgk1b")},m(r,i){F(r,t,i),E(t,n),F(r,s,i)},p(r,i){i&1&&l!==(l=r[11]+"")&&Se(n,l)},d(r){r&&(b(t),b(s))}}}function hl(e){let t,l,n,s,r,i,o=ae(e[0]),f=[];for(let h=0;h<o.length;h+=1)f[h]=gt(_t(e,o,h));return{c(){t=D("label"),l=D("input"),n=ee(),s=D("span");for(let h=0;h<f.length;h+=1)f[h].c();this.h()},l(h){t=N(h,"LABEL",{class:!0,style:!0});var c=B(t);l=N(c,"INPUT",{type:!0,class:!0}),n=te(c),s=N(c,"SPAN",{class:!0});var a=B(s);for(let _=0;_<f.length;_+=1)f[_].l(a);a.forEach(b),c.forEach(b),this.h()},h(){u(l,"type","checkbox"),u(l,"class","svelte-6fgk1b"),u(s,"class","slider round svelte-6fgk1b"),u(t,"class","switch svelte-6fgk1b"),L(t,"--pad",e[1]+"px"),L(t,"--fw",e[4]+"px"),L(t,"--w",e[4]/2+"px"),L(t,"--tw",e[4]/2-2*e[1]+"px"),L(t,"--height",e[2]+"px"),L(t,"--full-height",e[2]+2*e[1]+"px"),L(t,"--label","'"+e[5]+"'")},m(h,c){F(h,t,c),E(t,l),l.checked=e[3],E(t,n),E(t,s);for(let a=0;a<f.length;a+=1)f[a]&&f[a].m(s,null);r||(i=he(l,"change",e[9]),r=!0)},p(h,[c]){if(c&8&&(l.checked=h[3]),c&1){o=ae(h[0]);let a;for(a=0;a<o.length;a+=1){const _=_t(h,o,a);f[a]?f[a].p(_,c):(f[a]=gt(_),f[a].c(),f[a].m(s,null))}for(;a<f.length;a+=1)f[a].d(1);f.length=o.length}c&2&&L(t,"--pad",h[1]+"px"),c&16&&L(t,"--fw",h[4]+"px"),c&16&&L(t,"--w",h[4]/2+"px"),c&18&&L(t,"--tw",h[4]/2-2*h[1]+"px"),c&4&&L(t,"--height",h[2]+"px"),c&6&&L(t,"--full-height",h[2]+2*h[1]+"px"),c&32&&L(t,"--label","'"+h[5]+"'")},i:We,o:We,d(h){h&&b(t),Re(f,h),r=!1,i()}}}function ul(e){return((e[0].length>e[1].length?e[0].length:e[1].length)*.8+2)*20}function cl(e,t,l){let n,s,{values:r=["On","Off"]}=t,{labels:i=r.map(m=>m.toString())}=t,{value:o=r[0]}=t,{pad:f=5}=t,{height:h=26}=t,{width:c=void 0}=t,a=o==r[1];const _=m=>{l(6,o=m?r[1]:r[0])};function S(){a=this.checked,l(3,a)}return e.$$set=m=>{"values"in m&&l(7,r=m.values),"labels"in m&&l(0,i=m.labels),"value"in m&&l(6,o=m.value),"pad"in m&&l(1,f=m.pad),"height"in m&&l(2,h=m.height),"width"in m&&l(8,c=m.width)},e.$$.update=()=>{e.$$.dirty&9&&l(5,n=a?i[1]:i[0]),e.$$.dirty&8&&_(a),e.$$.dirty&257&&l(4,s=c||ul(i))},[i,f,h,a,s,n,o,r,c,S]}class lt extends qe{constructor(t){super(),De(this,t,cl,hl,Me,{values:7,labels:0,value:6,pad:1,height:2,width:8})}}function dl(e){let t,l,n,s,r,i,o,f,h,c;return{c(){t=re("path"),n=ee(),s=re("path"),i=ee(),o=re("g"),f=re("path"),this.h()},l(a){t=se(a,"path",{d:!0,fill:!0,"fill-opacity":!0,class:!0}),B(t).forEach(b),n=te(a),s=se(a,"path",{d:!0,fill:!0,class:!0}),B(s).forEach(b),i=te(a),o=se(a,"g",{style:!0,class:!0});var _=B(o);f=se(_,"path",{d:!0,stroke:!0,"stroke-width":!0,"stroke-linecap":!0,"stroke-linejoin":!0,fill:!0,class:!0}),B(f).forEach(b),_.forEach(b),this.h()},h(){u(t,"d",l="M0 0 H"+e[0]+" V"+e[0]+" H0 V0 Z"),u(t,"fill","var(--color-theme-blue)"),u(t,"fill-opacity","0.7"),u(t,"class","svelte-12wtsp1"),u(s,"d",r="M0 "+e[2]+" H"+e[0]+" V0 H0 V0 Z"),u(s,"fill","var(--color-theme-lightblue)"),u(s,"class","svelte-12wtsp1"),u(f,"d",h="M"+e[0]*Ne+" "+e[3]+" L"+e[0]*.5+" "+e[0]*Ae+" L"+e[0]*(1-Ne)+" "+e[3]),u(f,"stroke","var(--color-theme-white)"),u(f,"stroke-width",c=mt*e[0]),u(f,"stroke-linecap","round"),u(f,"stroke-linejoin","round"),u(f,"fill","none"),u(f,"class","svelte-12wtsp1"),L(o,"--rot",e[1]+"deg"),L(o,"--rx",e[0]/2+"px"),L(o,"--ry",e[0]*($e+Ae)/2+"px"),u(o,"class","svelte-12wtsp1")},m(a,_){F(a,t,_),F(a,n,_),F(a,s,_),F(a,i,_),F(a,o,_),E(o,f)},p(a,[_]){_&1&&l!==(l="M0 0 H"+a[0]+" V"+a[0]+" H0 V0 Z")&&u(t,"d",l),_&5&&r!==(r="M0 "+a[2]+" H"+a[0]+" V0 H0 V0 Z")&&u(s,"d",r),_&9&&h!==(h="M"+a[0]*Ne+" "+a[3]+" L"+a[0]*.5+" "+a[0]*Ae+" L"+a[0]*(1-Ne)+" "+a[3])&&u(f,"d",h),_&1&&c!==(c=mt*a[0])&&u(f,"stroke-width",c),_&2&&L(o,"--rot",a[1]+"deg"),_&1&&L(o,"--rx",a[0]/2+"px"),_&1&&L(o,"--ry",a[0]*($e+Ae)/2+"px")},i:We,o:We,d(a){a&&(b(t),b(n),b(s),b(i),b(o))}}}let _l=.13,Ne=.15,Ae=.78,$e=.34,mt=.08;function gl(e,t,l){let n,s,{size:r=3}=t,{rotated:i=0}=t,{text:o="expand"}=t;return e.$$set=f=>{"size"in f&&l(0,r=f.size),"rotated"in f&&l(1,i=f.rotated),"text"in f&&l(4,o=f.text)},e.$$.update=()=>{e.$$.dirty&1&&l(3,n=r*$e),e.$$.dirty&1&&l(2,s=r*_l)},[r,i,s,n,o]}class ml extends qe{constructor(t){super(),De(this,t,gl,dl,Me,{size:0,rotated:1,text:4})}}function pt(e,t,l){const n=e.slice();return n[52]=t[l],n}function bt(e,t,l){const n=e.slice();return n[46]=t[l],n}function vt(e,t,l){const n=e.slice();return n[49]=t[l],n}function kt(e){var K,M;let t,l,n,s,r,i,o,f,h,c,a,_,S,m,H,W,Q,j,V,O,z,I,p,v,T;n=new tt({props:{text:((M=(K=e[4])==null?void 0:K.bifurcations[e[1]])==null?void 0:M.description)||"",width:e[2]*.9,height:e[14]*2,x:e[2]*.1,y:-.5}});function Y(G){e[41](G)}let C={values:e[29],width:e[23]};e[0][e[1]].size_base!==void 0&&(C.value=e[0][e[1]].size_base),o=new lt({props:C}),Ze.push(()=>Je(o,"value",Y));let y=e[12]&&wt(e),X=e[11]&&St(e),J=e[10]&&Ot(e);return z=new ml({props:{size:e[14],text:e[10]?"collapse":"expand",rotated:e[10]?180:0}}),{c(){t=re("g"),l=re("rect"),_e(n.$$.fragment),s=re("foreignObject"),r=D("div"),i=D("div"),_e(o.$$.fragment),h=ee(),c=D("div"),y&&y.c(),_=ee(),S=D("div"),X&&X.c(),H=ee(),W=D("div"),J&&J.c(),j=ee(),O=re("g"),_e(z.$$.fragment),this.h()},l(G){t=se(G,"g",{style:!0});var w=B(t);l=se(w,"rect",{fill:!0,height:!0,width:!0,style:!0,class:!0}),B(l).forEach(b),ge(n.$$.fragment,w),s=se(w,"foreignObject",{width:!0,height:!0,style:!0,class:!0});var ie=B(s);r=N(ie,"DIV",{class:!0,style:!0});var g=B(r);i=N(g,"DIV",{class:!0});var k=B(i);ge(o.$$.fragment,k),k.forEach(b),h=te(g),c=N(g,"DIV",{class:!0,style:!0});var Z=B(c);y&&y.l(Z),Z.forEach(b),_=te(g),S=N(g,"DIV",{class:!0});var A=B(S);X&&X.l(A),A.forEach(b),H=te(g),W=N(g,"DIV",{class:!0});var le=B(W);J&&J.l(le),le.forEach(b),j=te(g),g.forEach(b),ie.forEach(b),O=se(w,"g",{style:!0});var oe=B(O);ge(z.$$.fragment,oe),oe.forEach(b),w.forEach(b),this.h()},h(){u(l,"fill","grey"),u(l,"height","1"),u(l,"width",e[3]),L(l,"transform","matrix(1, 0, 0, "+e[15]+", 0, 0)"),L(l,"opacity",e[10]?.5:.3),u(l,"class","svelte-1bnkwyr"),u(i,"class","control-elem svelte-1bnkwyr"),u(c,"class",a="control-elem "+e[21]+" svelte-1bnkwyr"),L(c,"--r",Qe+(e[23]-Ke)*(e[0][e[1]].limit_n-e[6])/(e[5]-e[6])+"px"),u(S,"class",m="control-elem "+e[20]+" svelte-1bnkwyr"),u(W,"class",Q="control-elem "+e[19]+" svelte-1bnkwyr"),u(r,"class","main-controls svelte-1bnkwyr"),L(r,"--full-width",e[7]+"px"),L(r,"--slider-width",e[23]+"px"),L(r,"--label-width",Qe+"px"),L(r,"--thumb-width",Ke+"px"),L(r,"--slider-height",et+"px"),L(r,"--thumb-height",e[26]+"px"),u(s,"width",e[7]),u(s,"height",V=e[15]/e[16]),L(s,"transform","matrix("+e[16]+", 0, 0, "+e[16]+", 0, 0)"),u(s,"class","svelte-1bnkwyr"),L(O,"transform","matrix(1,0,0,1,"+e[2]*.85+", "+e[15]*.03+")"),L(t,"--y-off",e[22]+"px")},m(G,w){F(G,t,w),E(t,l),me(n,t,null),E(t,s),E(s,r),E(r,i),me(o,i,null),E(r,h),E(r,c),y&&y.m(c,null),E(r,_),E(r,S),X&&X.m(S,null),E(r,H),E(r,W),J&&J.m(W,null),E(r,j),E(t,O),me(z,O,null),p=!0,v||(T=he(O,"click",function(){Ce(ft(e[25],e[1]))&&ft(e[25],e[1]).apply(this,arguments)}),v=!0)},p(G,w){var Z,A;e=G,(!p||w[0]&8)&&u(l,"width",e[3]),(!p||w[0]&32768)&&L(l,"transform","matrix(1, 0, 0, "+e[15]+", 0, 0)"),(!p||w[0]&1024)&&L(l,"opacity",e[10]?.5:.3);const ie={};w[0]&18&&(ie.text=((A=(Z=e[4])==null?void 0:Z.bifurcations[e[1]])==null?void 0:A.description)||""),w[0]&4&&(ie.width=e[2]*.9),w[0]&16384&&(ie.height=e[14]*2),w[0]&4&&(ie.x=e[2]*.1),n.$set(ie);const g={};w[0]&8388608&&(g.width=e[23]),!f&&w[0]&3&&(f=!0,g.value=e[0][e[1]].size_base,Ye(()=>f=!1)),o.$set(g),e[12]?y?(y.p(e,w),w[0]&4096&&U(y,1)):(y=wt(e),y.c(),U(y,1),y.m(c,null)):y&&(Oe(),$(y,1,1,()=>{y=null}),Ie()),(!p||w[0]&2097152&&a!==(a="control-elem "+e[21]+" svelte-1bnkwyr"))&&u(c,"class",a),(!p||w[0]&8388707)&&L(c,"--r",Qe+(e[23]-Ke)*(e[0][e[1]].limit_n-e[6])/(e[5]-e[6])+"px"),e[11]?X?(X.p(e,w),w[0]&2048&&U(X,1)):(X=St(e),X.c(),U(X,1),X.m(S,null)):X&&(Oe(),$(X,1,1,()=>{X=null}),Ie()),(!p||w[0]&1048576&&m!==(m="control-elem "+e[20]+" svelte-1bnkwyr"))&&u(S,"class",m),e[10]?J?J.p(e,w):(J=Ot(e),J.c(),J.m(W,null)):J&&(J.d(1),J=null),(!p||w[0]&524288&&Q!==(Q="control-elem "+e[19]+" svelte-1bnkwyr"))&&u(W,"class",Q),(!p||w[0]&128)&&L(r,"--full-width",e[7]+"px"),(!p||w[0]&8388608)&&L(r,"--slider-width",e[23]+"px"),(!p||w[0]&128)&&u(s,"width",e[7]),(!p||w[0]&98304&&V!==(V=e[15]/e[16]))&&u(s,"height",V),(!p||w[0]&65536)&&L(s,"transform","matrix("+e[16]+", 0, 0, "+e[16]+", 0, 0)");const k={};w[0]&16384&&(k.size=e[14]),w[0]&1024&&(k.text=e[10]?"collapse":"expand"),w[0]&1024&&(k.rotated=e[10]?180:0),z.$set(k),(!p||w[0]&32772)&&L(O,"transform","matrix(1,0,0,1,"+e[2]*.85+", "+e[15]*.03+")"),(!p||w[0]&4194304)&&L(t,"--y-off",e[22]+"px")},i(G){p||(U(n.$$.fragment,G),U(o.$$.fragment,G),U(y),U(X),U(z.$$.fragment,G),G&&Te(()=>{p&&(I||(I=ve(t,ke,{duration:Xe},!0)),I.run(1))}),p=!0)},o(G){$(n.$$.fragment,G),$(o.$$.fragment,G),$(y),$(X),$(z.$$.fragment,G),G&&(I||(I=ve(t,ke,{duration:Xe},!1)),I.run(0)),p=!1},d(G){G&&b(t),pe(n),pe(o),y&&y.d(),X&&X.d(),J&&J.d(),pe(z),G&&I&&I.end(),v=!1,T()}}}function wt(e){let t,l,n,s,r,i,o,f,h,c,a,_,S=e[0][e[1]].limit_n+"",m,H,W,Q,j;return{c(){t=D("div"),l=D("div"),n=D("span"),s=ue(e[6]),r=ee(),i=D("input"),o=ee(),f=D("span"),h=ue(e[5]),c=ee(),a=D("label"),_=ue("show "),m=ue(S),this.h()},l(V){t=N(V,"DIV",{id:!0,class:!0});var O=B(t);l=N(O,"DIV",{id:!0,class:!0});var z=B(l);n=N(z,"SPAN",{class:!0});var I=B(n);s=ce(I,e[6]),I.forEach(b),r=te(z),i=N(z,"INPUT",{id:!0,type:!0,min:!0,max:!0,class:!0}),o=te(z),f=N(z,"SPAN",{class:!0});var p=B(f);h=ce(p,e[5]),p.forEach(b),z.forEach(b),c=te(O),a=N(O,"LABEL",{for:!0,class:!0});var v=B(a);_=ce(v,"show "),m=ce(v,S),v.forEach(b),O.forEach(b),this.h()},h(){u(n,"class","svelte-1bnkwyr"),u(i,"id","topn-input"),u(i,"type","range"),u(i,"min",e[6]),u(i,"max",e[5]),u(i,"class","svelte-1bnkwyr"),u(f,"class","svelte-1bnkwyr"),u(l,"id","topn-slider"),u(l,"class","svelte-1bnkwyr"),u(a,"for","topn-input"),u(a,"class","svelte-1bnkwyr"),u(t,"id","topn-control"),u(t,"class","svelte-1bnkwyr")},m(V,O){F(V,t,O),E(t,l),E(l,n),E(n,s),E(l,r),E(l,i),Ve(i,e[0][e[1]].limit_n),E(l,o),E(l,f),E(f,h),E(t,c),E(t,a),E(a,_),E(a,m),W=!0,Q||(j=[he(i,"change",e[42]),he(i,"input",e[42])],Q=!0)},p(V,O){e=V,(!W||O[0]&64)&&Se(s,e[6]),(!W||O[0]&64)&&u(i,"min",e[6]),(!W||O[0]&32)&&u(i,"max",e[5]),O[0]&3&&Ve(i,e[0][e[1]].limit_n),(!W||O[0]&32)&&Se(h,e[5]),(!W||O[0]&3)&&S!==(S=e[0][e[1]].limit_n+"")&&Se(m,S)},i(V){W||(V&&Te(()=>{W&&(H||(H=ve(t,ke,{duration:Xe},!0)),H.run(1))}),W=!0)},o(V){V&&(H||(H=ve(t,ke,{duration:Xe},!1)),H.run(0)),W=!1},d(V){V&&b(t),V&&H&&H.end(),Q=!1,Ge(j)}}}function St(e){let t,l,n;function s(i){e[43](i)}let r={values:e[30],width:e[23]};return e[9]!==void 0&&(r.value=e[9]),t=new lt({props:r}),Ze.push(()=>Je(t,"value",s)),{c(){_e(t.$$.fragment)},l(i){ge(t.$$.fragment,i)},m(i,o){me(t,i,o),n=!0},p(i,o){const f={};o[0]&8388608&&(f.width=i[23]),!l&&o[0]&512&&(l=!0,f.value=i[9],Ye(()=>l=!1)),t.$set(f)},i(i){n||(U(t.$$.fragment,i),n=!0)},o(i){$(t.$$.fragment,i),n=!1},d(i){pe(t,i)}}}function Ot(e){let t,l,n,s,r,i,o,f=e[0][e[1]].include.length+"",h,c,a=e[0][e[1]].exclude.length+"",_,S,m,H,W="edit",Q,j;const V=[bl,pl],O=[];function z(I,p){return I[17]?0:I[18].length>0?1:-1}return~(n=z(e))&&(s=O[n]=V[n](e)),{c(){t=D("input"),l=ee(),s&&s.c(),r=ee(),i=D("span"),o=D("span"),h=ue(f),c=ue(` included,
								`),_=ue(a),S=ue(" excluded"),m=ee(),H=D("button"),H.textContent=W,this.h()},l(I){t=N(I,"INPUT",{type:!0,placeholder:!0,class:!0}),l=te(I),s&&s.l(I),r=te(I),i=N(I,"SPAN",{class:!0});var p=B(i);o=N(p,"SPAN",{});var v=B(o);h=ce(v,f),c=ce(v,` included,
								`),_=ce(v,a),S=ce(v," excluded"),v.forEach(b),m=te(p),H=N(p,"BUTTON",{"data-svelte-h":!0}),He(H)!=="svelte-qj012s"&&(H.textContent=W),p.forEach(b),this.h()},h(){u(t,"type","text"),u(t,"placeholder","include/exclude"),u(t,"class","fzf-input svelte-1bnkwyr"),u(i,"class","include-exclude-desc svelte-1bnkwyr")},m(I,p){F(I,t,p),Ve(t,e[8]),F(I,l,p),~n&&O[n].m(I,p),F(I,r,p),F(I,i,p),E(i,o),E(o,h),E(o,c),E(o,_),E(o,S),E(i,m),E(i,H),Q||(j=[he(t,"input",e[44]),he(H,"click",e[27])],Q=!0)},p(I,p){p[0]&256&&t.value!==I[8]&&Ve(t,I[8]);let v=n;n=z(I),n===v?~n&&O[n].p(I,p):(s&&(Oe(),$(O[v],1,1,()=>{O[v]=null}),Ie()),~n?(s=O[n],s?s.p(I,p):(s=O[n]=V[n](I),s.c()),U(s,1),s.m(r.parentNode,r)):s=null),p[0]&3&&f!==(f=I[0][I[1]].include.length+"")&&Se(h,f),p[0]&3&&a!==(a=I[0][I[1]].exclude.length+"")&&Se(_,a)},d(I){I&&(b(t),b(l),b(r),b(i)),~n&&O[n].d(I),Q=!1,Ge(j)}}}function pl(e){let t,l,n="✖",s,r,i,o,f,h,c=ae(e[18]),a=[];for(let _=0;_<c.length;_+=1)a[_]=It(pt(e,c,_));return{c(){t=D("div"),l=D("button"),l.textContent=n,s=ee(),r=D("ul");for(let _=0;_<a.length;_+=1)a[_].c();this.h()},l(_){t=N(_,"DIV",{class:!0});var S=B(t);l=N(S,"BUTTON",{class:!0,"data-svelte-h":!0}),He(l)!=="svelte-1c9wehz"&&(l.textContent=n),s=te(S),r=N(S,"UL",{});var m=B(r);for(let H=0;H<a.length;H+=1)a[H].l(m);m.forEach(b),S.forEach(b),this.h()},h(){u(l,"class","close-button svelte-1bnkwyr"),u(t,"class","blurred-overlay svelte-1bnkwyr")},m(_,S){F(_,t,S),E(t,l),E(t,s),E(t,r);for(let m=0;m<a.length;m+=1)a[m]&&a[m].m(r,null);o=!0,f||(h=he(l,"click",e[45]),f=!0)},p(_,S){if(S[0]&262144|S[1]&1){c=ae(_[18]);let m;for(m=0;m<c.length;m+=1){const H=pt(_,c,m);a[m]?a[m].p(H,S):(a[m]=It(H),a[m].c(),a[m].m(r,null))}for(;m<a.length;m+=1)a[m].d(1);a.length=c.length}},i(_){o||(_&&Te(()=>{o&&(i||(i=ve(t,ke,{duration:100},!0)),i.run(1))}),o=!0)},o(_){_&&(i||(i=ve(t,ke,{duration:100},!1)),i.run(0)),o=!1},d(_){_&&b(t),Re(a,_),_&&i&&i.end(),f=!1,h()}}}function bl(e){let t,l,n="✖",s,r,i,o=ae(e[24]),f=[];for(let h=0;h<o.length;h+=1)f[h]=yt(bt(e,o,h));return{c(){t=D("div"),l=D("button"),l.textContent=n,s=ee();for(let h=0;h<f.length;h+=1)f[h].c();this.h()},l(h){t=N(h,"DIV",{class:!0});var c=B(t);l=N(c,"BUTTON",{class:!0,"data-svelte-h":!0}),He(l)!=="svelte-rkil3s"&&(l.textContent=n),s=te(c);for(let a=0;a<f.length;a+=1)f[a].l(c);c.forEach(b),this.h()},h(){u(l,"class","close-button svelte-1bnkwyr"),u(t,"class","blurred-overlay svelte-1bnkwyr")},m(h,c){F(h,t,c),E(t,l),E(t,s);for(let a=0;a<f.length;a+=1)f[a]&&f[a].m(t,null);r||(i=he(l,"click",e[28]),r=!0)},p(h,c){if(c[0]&16777219|c[1]&6){o=ae(h[24]);let a;for(a=0;a<o.length;a+=1){const _=bt(h,o,a);f[a]?f[a].p(_,c):(f[a]=yt(_),f[a].c(),f[a].m(t,null))}for(;a<f.length;a+=1)f[a].d(1);f.length=o.length}},i:We,o:We,d(h){h&&b(t),Re(f,h),r=!1,i()}}}function It(e){let t,l=e[52].name+"",n,s,r,i="include",o,f,h="exclude",c,a,_;return{c(){t=D("li"),n=ue(l),s=ee(),r=D("button"),r.textContent=i,o=ee(),f=D("button"),f.textContent=h,c=ee()},l(S){t=N(S,"LI",{});var m=B(t);n=ce(m,l),s=te(m),r=N(m,"BUTTON",{"data-svelte-h":!0}),He(r)!=="svelte-1pcobpd"&&(r.textContent=i),o=te(m),f=N(m,"BUTTON",{"data-svelte-h":!0}),He(f)!=="svelte-ktsiop"&&(f.textContent=h),c=te(m),m.forEach(b)},m(S,m){F(S,t,m),E(t,n),E(t,s),E(t,r),E(t,o),E(t,f),E(t,c),a||(_=[he(r,"click",function(){Ce(e[31](e[52].id,"include"))&&e[31](e[52].id,"include").apply(this,arguments)}),he(f,"click",function(){Ce(e[31](e[52].id,"exclude"))&&e[31](e[52].id,"exclude").apply(this,arguments)})],a=!0)},p(S,m){e=S,m[0]&262144&&l!==(l=e[52].name+"")&&Se(n,l)},d(S){S&&b(t),a=!1,Ge(_)}}}function Et(e){let t,l=e[33](e[49])+"",n,s,r,i="✖",o,f;return{c(){t=D("span"),n=ue(l),s=ee(),r=D("span"),r.textContent=i,this.h()},l(h){t=N(h,"SPAN",{class:!0});var c=B(t);n=ce(c,l),s=te(c),r=N(c,"SPAN",{class:!0,"data-svelte-h":!0}),He(r)!=="svelte-16j7zdb"&&(r.textContent=i),c.forEach(b),this.h()},h(){u(r,"class","clear-button svelte-1bnkwyr"),u(t,"class","selected-card svelte-1bnkwyr")},m(h,c){F(h,t,c),E(t,n),E(t,s),E(t,r),o||(f=he(r,"click",function(){Ce(e[32](e[49],e[46]))&&e[32](e[49],e[46]).apply(this,arguments)}),o=!0)},p(h,c){e=h,c[0]&3&&l!==(l=e[33](e[49])+"")&&Se(n,l)},d(h){h&&b(t),o=!1,f()}}}function yt(e){let t,l=ae(e[0][e[1]][e[46]]),n=[];for(let s=0;s<l.length;s+=1)n[s]=Et(vt(e,l,s));return{c(){for(let s=0;s<n.length;s+=1)n[s].c();t=be()},l(s){for(let r=0;r<n.length;r+=1)n[r].l(s);t=be()},m(s,r){for(let i=0;i<n.length;i+=1)n[i]&&n[i].m(s,r);F(s,t,r)},p(s,r){if(r[0]&16777219|r[1]&6){l=ae(s[0][s[1]][s[46]]);let i;for(i=0;i<l.length;i+=1){const o=vt(s,l,i);n[i]?n[i].p(o,r):(n[i]=Et(o),n[i].c(),n[i].m(t.parentNode,t))}for(;i<n.length;i+=1)n[i].d(1);n.length=l.length}},d(s){s&&b(t),Re(n,s)}}}function vl(e){let t,l,n=e[13]!=null&&kt(e);return{c(){n&&n.c(),t=be()},l(s){n&&n.l(s),t=be()},m(s,r){n&&n.m(s,r),F(s,t,r),l=!0},p(s,r){s[13]!=null?n?(n.p(s,r),r[0]&8192&&U(n,1)):(n=kt(s),n.c(),U(n,1),n.m(t.parentNode,t)):n&&(Oe(),$(n,1,1,()=>{n=null}),Ie())},i(s){l||(U(n),l=!0)},o(s){$(n),l=!1},d(s){s&&b(t),n&&n.d(s)}}}let Xe=400,Qe=30,et=30,Ke=80;function kl(e,t,l){let n,s,r,i,o,f,h,c,a,_,S,m,H,W,Q;const j=["exclude","include"];let{lVis:V}=t,{index:O}=t,{expandedIndex:z}=t,{childHeightRate:I}=t,{overHangRate:p}=t,{sideBarWidth:v}=t,{svgWidth:T}=t,{currentQcSpec:Y}=t,{controlSpecs:C}=t,{attributeLabels:y}=t,{maxOnOneLevel:X=15}=t,{minShow:J=1}=t,{controlHtmlWidth:K=320}=t;const M=Pt();let G=et-4,w="",ie=!1;const g=()=>l(17,ie=!0),k=()=>l(17,ie=!1);let Z=["volume","specialization"],A=["highest","lowest"],le=C[O].show_top?"highest":"lowest";function oe(d,P){return()=>{l(0,C[O][P]=[d,...C[O][P].filter(x=>x!=d)],C)}}function q(d,P){return()=>{l(0,C[O][P]=C[O][P].filter(x=>x!=d),C)}}function ne(d){var P;return((P=a[d])==null?void 0:P.name)||"Unknown"}function Pe(d){e.$$.not_equal(C[O].size_base,d)&&(C[O].size_base=d,l(0,C),l(1,O),l(9,le))}function je(){C[O].limit_n=Ut(this.value),l(0,C),l(1,O),l(9,le)}function ze(d){le=d,l(9,le)}function R(){w=this.value,l(8,w)}const fe=()=>l(8,w="");return e.$$set=d=>{"lVis"in d&&l(34,V=d.lVis),"index"in d&&l(1,O=d.index),"expandedIndex"in d&&l(35,z=d.expandedIndex),"childHeightRate"in d&&l(36,I=d.childHeightRate),"overHangRate"in d&&l(37,p=d.overHangRate),"sideBarWidth"in d&&l(2,v=d.sideBarWidth),"svgWidth"in d&&l(3,T=d.svgWidth),"currentQcSpec"in d&&l(4,Y=d.currentQcSpec),"controlSpecs"in d&&l(0,C=d.controlSpecs),"attributeLabels"in d&&l(38,y=d.attributeLabels),"maxOnOneLevel"in d&&l(5,X=d.maxOnOneLevel),"minShow"in d&&l(6,J=d.minShow),"controlHtmlWidth"in d&&l(7,K=d.controlHtmlWidth)},e.$$.update=()=>{e.$$.dirty[0]&128&&l(23,n=K-Qe*2),e.$$.dirty[0]&2|e.$$.dirty[1]&16&&l(10,s=O==z),e.$$.dirty[0]&18&&l(13,r=Y==null?void 0:Y.bifurcations[O]),e.$$.dirty[1]&104&&l(22,i=V.topOffset+V.totalSize-V.totalSize*(I+p)),e.$$.dirty[1]&40&&l(15,o=V.totalSize*I),e.$$.dirty[0]&132&&l(16,f=v*.85/K),e.$$.dirty[0]&65536&&l(14,h=et*f),e.$$.dirty[0]&49152&&l(40,c=o/h),e.$$.dirty[0]&8192|e.$$.dirty[1]&128&&l(39,a=y[r==null?void 0:r.attribute_kind]||{}),e.$$.dirty[1]&512&&l(12,_=c>3.2),e.$$.dirty[0]&4096&&l(21,S=_?"":"control-hidden"),e.$$.dirty[1]&512&&l(11,m=c>4.8),e.$$.dirty[0]&2048&&l(20,H=m?"":"control-hidden"),e.$$.dirty[0]&1024&&l(19,W=s?"":"control-hidden"),e.$$.dirty[0]&256|e.$$.dirty[1]&256&&l(18,Q=Jt(w,a,4)),e.$$.dirty[0]&514&&(d=>{l(0,C[O].show_top=d=="highest",C)})(le)},[C,O,v,T,Y,X,J,K,w,le,s,m,_,r,h,o,f,ie,Q,W,H,S,i,n,j,M,G,g,k,Z,A,oe,q,ne,V,z,I,p,y,a,c,Pe,je,ze,R,fe]}class wl extends qe{constructor(t){super(),De(this,t,kl,vl,Me,{lVis:34,index:1,expandedIndex:35,childHeightRate:36,overHangRate:37,sideBarWidth:2,svgWidth:3,currentQcSpec:4,controlSpecs:0,attributeLabels:38,maxOnOneLevel:5,minShow:6,controlHtmlWidth:7},null,[-1,-1])}}function Ct(e,t,l){const n=e.slice();return n[46]=t[l],n[48]=l,n}function Rt(e,t,l){const n=e.slice();return n[49]=t[l][0],n[50]=t[l][1],n}function Ht(e){var ie;let t,l,n,s,r,i,o,f,h,c,a,_,S="Infobox on Hover",m,H,W,Q,j,V,O,z,I,p,v,T,Y=!1,C=ae(Object.entries(e[17])),y=[];for(let g=0;g<C.length;g+=1)y[g]=Tt(Rt(e,C,g));function X(g){e[32](g)}let J={values:[!0,!1],labels:["On","Off"]};e[4]!==void 0&&(J.value=e[4]),H=new lt({props:J}),Ze.push(()=>Je(H,"value",X));let K=ae(e[19]||[]),M=[];for(let g=0;g<K.length;g+=1)M[g]=Bt(Ct(e,K,g));const G=g=>$(M[g],1,1,()=>{M[g]=null});O=new jt({props:{qcSpec:e[6],branchReachBack:e[20],xOffset:e[25],rootWidth:Ue,attributeLabels:e[9],visibleTreeInfo:e[13],selectionState:e[12],levelVisuals:e[19],treeWidth:e[23],treeXOffset:e[24],childHeightRate:e[16],overHangRate:zt,childBaseWidth:El}}),O.$on("ti",e[27]),z=new tt({props:{height:e[20]-2,width:Ue*.8,text:((ie=e[8])==null?void 0:ie.name)||"",anchor:"middle",x:e[25]+Ue/2,y:-1,allowRotation:!1}});let w=e[18]!=null&&Lt(e);return{c(){t=re("svg"),l=re("rect"),s=re("rect"),i=re("foreignObject"),o=D("div"),f=D("div"),h=D("select");for(let g=0;g<y.length;g+=1)y[g].c();c=ee(),a=D("div"),_=D("span"),_.textContent=S,m=ee(),_e(H.$$.fragment),Q=ee();for(let g=0;g<M.length;g+=1)M[g].c();V=be(),_e(O.$$.fragment),_e(z.$$.fragment),w&&w.c(),this.h()},l(g){t=se(g,"svg",{viewBox:!0,xmlns:!0});var k=B(t);l=se(k,"rect",{fill:!0,"fill-opacity":!0,x:!0,y:!0,height:!0,width:!0}),B(l).forEach(b),s=se(k,"rect",{id:!0,y:!0,x:!0,width:!0,height:!0,class:!0}),B(s).forEach(b),i=se(k,"foreignObject",{y:!0,width:!0,height:!0,transform:!0});var Z=B(i);o=N(Z,"DIV",{style:!0});var A=B(o);f=N(A,"DIV",{id:!0,class:!0});var le=B(f);h=N(le,"SELECT",{class:!0});var oe=B(h);for(let ne=0;ne<y.length;ne+=1)y[ne].l(oe);oe.forEach(b),le.forEach(b),c=te(A),a=N(A,"DIV",{id:!0,class:!0});var q=B(a);_=N(q,"SPAN",{class:!0,"data-svelte-h":!0}),He(_)!=="svelte-1amfah6"&&(_.textContent=S),m=te(q),ge(H.$$.fragment,q),q.forEach(b),Q=te(A),A.forEach(b),Z.forEach(b);for(let ne=0;ne<M.length;ne+=1)M[ne].l(k);V=be(),ge(O.$$.fragment,k),ge(z.$$.fragment,k),w&&w.l(k),k.forEach(b),this.h()},h(){u(l,"fill","grey"),u(l,"fill-opacity",.3),u(l,"x",0),u(l,"y",n=-e[20]),u(l,"height",e[20]),u(l,"width",ye),u(s,"id","qc-header"),u(s,"y",r=-e[20]),u(s,"x",e[25]),u(s,"width",Ue),u(s,"height",e[20]),u(s,"class","svelte-14evmle"),u(h,"class","svelte-14evmle"),e[5]===void 0&&Te(()=>e[31].call(h)),u(f,"id","qc-type-selector"),u(f,"class","svelte-14evmle"),u(_,"class","svelte-14evmle"),u(a,"id","hover-check"),u(a,"class","svelte-14evmle"),L(o,"padding","20px"),u(i,"y",j=-e[20]/we),u(i,"width",Le/we),u(i,"height",500),u(i,"transform","scale("+we+","+we+")"),u(t,"viewBox",I="0 "+(-e[20]-e[21])+" "+ye+" "+e[14]),u(t,"xmlns","http://www.w3.org/2000/svg")},m(g,k){F(g,t,k),E(t,l),E(t,s),E(t,i),E(i,o),E(o,f),E(f,h);for(let Z=0;Z<y.length;Z+=1)y[Z]&&y[Z].m(h,null);nt(h,e[5],!0),E(o,c),E(o,a),E(a,_),E(a,m),me(H,a,null),E(o,Q);for(let Z=0;Z<M.length;Z+=1)M[Z]&&M[Z].m(t,null);E(t,V),me(O,t,null),me(z,t,null),w&&w.m(t,null),p=!0,v||(T=he(h,"change",e[31]),v=!0)},p(g,k){var oe;if((!p||k[0]&1048576&&n!==(n=-g[20]))&&u(l,"y",n),(!p||k[0]&1048576)&&u(l,"height",g[20]),(!p||k[0]&1048576&&r!==(r=-g[20]))&&u(s,"y",r),(!p||k[0]&1048576)&&u(s,"height",g[20]),k[0]&131072){C=ae(Object.entries(g[17]));let q;for(q=0;q<C.length;q+=1){const ne=Rt(g,C,q);y[q]?y[q].p(ne,k):(y[q]=Tt(ne),y[q].c(),y[q].m(h,null))}for(;q<y.length;q+=1)y[q].d(1);y.length=C.length}k[0]&131104&&nt(h,g[5]);const Z={};if(!W&&k[0]&16&&(W=!0,Z.value=g[4],Ye(()=>W=!1)),H.$set(Z),(!p||k[0]&1048576&&j!==(j=-g[20]/we))&&u(i,"y",j),k[0]&67700296){K=ae(g[19]||[]);let q;for(q=0;q<K.length;q+=1){const ne=Ct(g,K,q);M[q]?(M[q].p(ne,k),U(M[q],1)):(M[q]=Bt(ne),M[q].c(),U(M[q],1),M[q].m(t,V))}for(Oe(),q=K.length;q<M.length;q+=1)G(q);Ie()}const A={};k[0]&64&&(A.qcSpec=g[6]),k[0]&1048576&&(A.branchReachBack=g[20]),k[0]&512&&(A.attributeLabels=g[9]),k[0]&8192&&(A.visibleTreeInfo=g[13]),k[0]&4096&&(A.selectionState=g[12]),k[0]&524288&&(A.levelVisuals=g[19]),k[0]&65536&&(A.childHeightRate=g[16]),O.$set(A);const le={};k[0]&1048576&&(le.height=g[20]-2),k[0]&256&&(le.text=((oe=g[8])==null?void 0:oe.name)||""),z.$set(le),g[18]!=null?w?(w.p(g,k),k[0]&262144&&U(w,1)):(w=Lt(g),w.c(),U(w,1),w.m(t,null)):w&&(Oe(),$(w,1,1,()=>{w=null}),Ie()),(!p||k[0]&3162112&&I!==(I="0 "+(-g[20]-g[21])+" "+ye+" "+g[14]))&&u(t,"viewBox",I)},i(g){if(!p){U(Y),U(H.$$.fragment,g);for(let k=0;k<K.length;k+=1)U(M[k]);U(O.$$.fragment,g),U(z.$$.fragment,g),U(w),p=!0}},o(g){$(Y),$(H.$$.fragment,g),M=M.filter(Boolean);for(let k=0;k<M.length;k+=1)$(M[k]);$(O.$$.fragment,g),$(z.$$.fragment,g),$(w),p=!1},d(g){g&&b(t),Re(y,g),pe(H),Re(M,g),pe(O),pe(z),w&&w.d(),v=!1,T()}}}function Tt(e){let t,l=e[50].title+"",n,s,r;return{c(){t=D("option"),n=ue(l),s=ee(),this.h()},l(i){t=N(i,"OPTION",{class:!0});var o=B(t);n=ce(o,l),s=te(o),o.forEach(b),this.h()},h(){t.__value=r=e[49],Ve(t,t.__value),u(t,"class","svelte-14evmle")},m(i,o){F(i,t,o),E(t,n),E(t,s)},p(i,o){o[0]&131072&&l!==(l=i[50].title+"")&&Se(n,l),o[0]&131072&&r!==(r=i[49])&&(t.__value=r,Ve(t,t.__value))},d(i){i&&b(t)}}}function Bt(e){let t,l,n;function s(i){e[33](i)}let r={lVis:e[46],index:e[48],childHeightRate:e[16],overHangRate:zt,sideBarWidth:Le,svgWidth:ye,currentQcSpec:e[6],expandedIndex:e[3],attributeLabels:e[9]};return e[10]!==void 0&&(r.controlSpecs=e[10]),t=new wl({props:r}),Ze.push(()=>Je(t,"controlSpecs",s)),t.$on("ce",e[26]),{c(){_e(t.$$.fragment)},l(i){ge(t.$$.fragment,i)},m(i,o){me(t,i,o),n=!0},p(i,o){const f={};o[0]&524288&&(f.lVis=i[46]),o[0]&65536&&(f.childHeightRate=i[16]),o[0]&64&&(f.currentQcSpec=i[6]),o[0]&8&&(f.expandedIndex=i[3]),o[0]&512&&(f.attributeLabels=i[9]),!l&&o[0]&1024&&(l=!0,f.controlSpecs=i[10],Ye(()=>l=!1)),t.$set(f)},i(i){n||(U(t.$$.fragment,i),n=!0)},o(i){$(t.$$.fragment,i),n=!1},d(i){pe(t,i)}}}function Lt(e){var o;let t,l,n,s,r,i;return s=new fl({props:{path:e[2],weightedRoot:e[11],specBaselineOptions:e[7],attributeLabels:e[9],qcSpec:e[6],rootId:(o=e[8])==null?void 0:o.id}}),{c(){t=re("g"),l=re("rect"),n=re("foreignObject"),_e(s.$$.fragment),this.h()},l(f){t=se(f,"g",{style:!0});var h=B(t);l=se(h,"rect",{id:!0,height:!0,width:!0,fill:!0,"fill-opacity":!0,stroke:!0,"stroke-width":!0,rx:!0,class:!0}),B(l).forEach(b),n=se(h,"foreignObject",{height:!0,width:!0,transform:!0});var c=B(n);ge(s.$$.fragment,c),c.forEach(b),h.forEach(b),this.h()},h(){u(l,"id","hover-rect"),u(l,"height",Fe),u(l,"width",e[22]),u(l,"fill","var(--color-theme-white)"),u(l,"fill-opacity","0.85"),u(l,"stroke","black"),u(l,"stroke-width","0.1px"),u(l,"rx","0.2"),u(l,"class","svelte-14evmle"),u(n,"height",Fe/we),u(n,"width",e[22]/we),u(n,"transform","scale("+we+","+we+")"),L(t,"--x-off",e[18].position.x-e[22]+"px"),L(t,"--y-off",e[18].position.y-Fe+"px")},m(f,h){F(f,t,h),E(t,l),E(t,n),me(s,n,null),i=!0},p(f,h){var a;const c={};h[0]&4&&(c.path=f[2]),h[0]&2048&&(c.weightedRoot=f[11]),h[0]&128&&(c.specBaselineOptions=f[7]),h[0]&512&&(c.attributeLabels=f[9]),h[0]&64&&(c.qcSpec=f[6]),h[0]&256&&(c.rootId=(a=f[8])==null?void 0:a.id),s.$set(c),(!i||h[0]&262144)&&L(t,"--x-off",f[18].position.x-f[22]+"px"),(!i||h[0]&262144)&&L(t,"--y-off",f[18].position.y-Fe+"px")},i(f){i||(U(s.$$.fragment,f),f&&Te(()=>{i&&(r||(r=ve(t,ke,{duration:100},!0)),r.run(1))}),i=!0)},o(f){$(s.$$.fragment,f),f&&(r||(r=ve(t,ke,{duration:100},!1)),r.run(0)),i=!1},d(f){f&&b(t),pe(s),f&&r&&r.end()}}}function Sl(e){let t,l=![e[20],ye,e[14]].includes(NaN),n,s,r;Te(e[30]);let i=l&&Ht(e);return{c(){t=D("div"),i&&i.c(),this.h()},l(o){t=N(o,"DIV",{class:!0});var f=B(t);i&&i.l(f),f.forEach(b),this.h()},h(){u(t,"class","treefix svelte-14evmle")},m(o,f){F(o,t,f),i&&i.m(t,null),n=!0,s||(r=he(window,"resize",e[30]),s=!0)},p(o,f){f[0]&1064960&&(l=![o[20],ye,o[14]].includes(NaN)),l?i?(i.p(o,f),f[0]&1064960&&U(i,1)):(i=Ht(o),i.c(),U(i,1),i.m(t,null)):i&&(Oe(),$(i,1,1,()=>{i=null}),Ie())},i(o){n||(U(i),n=!0)},o(o){$(i),n=!1},d(o){o&&b(t),i&&i.d(),s=!1,r()}}}const Wt=.3;let ye=100,Ue=25,Le=17,zt=.05,Ol=.03,Vt=.12,Il=.85,El=2.5,Fe=12.5,we=.035;function yl(e,t){let l=new RegExp("\\{pc_id\\}","gi");return e.replace(l,t)}function Cl(e,t,l){let n,s,r,i,o,f,h,c;Ft(e,Yt,d=>l(36,c=d));const a={ce:d=>oe(parseInt(d)),se:d=>q(d.split("-")),sp:d=>{const P=parseInt(d);P<k.length&&l(10,k[P].size_base="specialization",k)},qc:d=>{Object.keys(T).includes(d)&&l(5,C=d)},mi:d=>{const P=parseInt(d.slice(0,1));P<k.length&&l(10,k[P].include=d.slice(1).split(","),k)}};async function _(d){if(d.length!=0)for(const P of d.split(";")){const x=P.slice(0,2),Ee=P.slice(2);if(x=="sl")await new Promise(de=>setTimeout(de,parseFloat(Ee)*1e3));else{const de=a[x];de!=null&&de(Ee)}}}let S=[],m,H,W=[],Q=[],j,V=Wt,O=!0,z=Le*.85,I=ye-Le-2,p=Le+1,v=I*.15+Le,T={},Y=[],C,y,X={},J,K,M={};const G=d=>({id:d[0],name:d[1].title});Qt(()=>{rt("root-descriptions",d=>{J=d[c.params.rootType],l(8,K=J.filter(P=>P.id==c.params.rootId)[0])}),$t().then(([d,P,x])=>{l(17,T=Object.fromEntries(Object.entries(P).filter(([Ee,de])=>de.root_entity_type==c.params.rootType))),Y=Object.entries(T).map(G),l(5,C=Y[0].id),l(9,M=d),l(7,X=x),_(c.url.searchParams.get("e")||"")})});function w(d,P){d==null||P==null||(Kt(`${xt}/view/${c.params.rootType}/${P}${c.url.search}`),rt(`qc-builds/${d}/${P}`,x=>{l(11,[Z,k,A,y,k]=[x,k,{children:{}},T[C],g(d,P)],Z,l(10,k),l(12,A),l(6,y))}))}function ie(d,P,x){return P&&d.length>0?{node:xe(d,o.tree),position:x}:void 0}function g(d,P){const x=[];for(var Ee of T[d].bifurcations)x.push({...st,...JSON.parse(yl(Ee.control_format_str,P))});return x}let k=[st],Z={weight:1},A={children:{}},le={x:0,y:0};function oe(d){d==j?(l(3,j=void 0),l(16,V=Wt)):(l(3,j=d),l(16,V=.5))}function q(d){var de;S.push(`se${d.join("-")}`);const P=d[d.length-1];let x=xe(d.slice(0,d.length-1),A);if((x==null?void 0:x.children)===void 0)return;Object.keys(x.children).includes(P)?(delete x.children[P],l(15,Q=ll(A))):(l(15,Q=d),x.children[P]={children:((de=x.children[P])==null?void 0:de.children)||{}}),l(12,A)}const ne=d=>oe(d.detail.ind);function Pe(d){const P=d.detail.path,x=d.detail.action;if(x=="highlight"){l(28,[le,W]=[d.detail.topLeftCorner,P],le,l(2,W));return}else if(x=="de-highlight"){l(2,W=[]);return}q(P)}function je(){l(1,H=window.innerWidth),l(0,m=window.innerHeight)}function ze(){C=Xt(this),l(5,C),l(17,T)}function R(d){O=d,l(4,O)}function fe(d){k=d,l(10,k)}return e.$$.update=()=>{e.$$.dirty[0]&3&&l(14,n=m/H*ye-5),e.$$.dirty[0]&16384&&l(21,s=n*Ol),e.$$.dirty[0]&16384&&l(20,r=n*Vt),e.$$.dirty[0]&16384&&l(29,i=n*(1-Vt)*Il),e.$$.dirty[0]&288&&w(C,K==null?void 0:K.id),e.$$.dirty[0]&8128&&l(13,o=el(K==null?void 0:K.id,Z,k,A,M,y,X)),e.$$.dirty[0]&536879112&&l(19,f=tl(o,i,j)),e.$$.dirty[0]&268435476&&l(18,h=ie(W,O,le))},[m,H,W,j,O,C,y,X,K,M,k,Z,A,o,n,Q,V,T,h,f,r,s,z,I,p,v,ne,Pe,le,i,je,ze,R,fe]}class Nl extends qe{constructor(t){super(),De(this,t,Cl,Sl,Me,{},null,[-1,-1])}}export{Nl as component};
