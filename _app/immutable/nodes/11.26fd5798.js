import{s as st,e as Se,i as K,d as T,R as x,a as oe,S as $,h as Y,c as ae,j as u,w as F,I as ke,D as Le,M as Ee,P as He,J as wt,V as St,E as vt,f as ce,g as _e,B as kt,o as It,p as ot,v as Ot,k as ve,W as De,X as at,l as yt,m as Rt,H as Ae,n as Tt,Y as Ct}from"../chunks/scheduler.84e3c04c.js";import{S as ht,i as ft,g as Ie,c as Oe,a as z,t as J,b as ge,d as pe,m as de,j as Te,e as me,k as ut}from"../chunks/index.4efd63ac.js";import{e as he,u as Et,o as Mt}from"../chunks/each.e6d20371.js";import{p as Bt}from"../chunks/stores.4dacf70d.js";import{g as Wt,b as Lt,a as Ht}from"../chunks/navigation.32b82a1e.js";import{b as Pt}from"../chunks/paths.6c52faf2.js";import{g as Pe,h as Xe,m as qt,d as jt,a as Vt,D as Qe,b as zt}from"../chunks/tree-loading.c61db980.js";import{f as Ce}from"../chunks/index.9d792c6d.js";import{B as ct}from"../chunks/BrokenFittedText.8751ef86.js";import{a as Dt}from"../chunks/style-util.8011bb2c.js";import{g as At,t as be,C as Xt,a as Qt}from"../chunks/ControlInterface.ea947aad.js";import{P as Gt}from"../chunks/PathLevelInfoBox.ccf593d6.js";function Ge(i){return function(){return i}}const qe=Math.PI,je=2*qe,ue=1e-6,Yt=je-ue;function _t(i){this._+=i[0];for(let e=1,t=i.length;e<t;++e)this._+=arguments[e]+i[e]}function Ft(i){let e=Math.floor(i);if(!(e>=0))throw new Error(`invalid digits: ${i}`);if(e>15)return _t;const t=10**e;return function(l){this._+=l[0];for(let a=1,s=l.length;a<s;++a)this._+=Math.round(arguments[a]*t)/t+l[a]}}class Jt{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?_t:Ft(e)}moveTo(e,t){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,t){this._append`L${this._x1=+e},${this._y1=+t}`}quadraticCurveTo(e,t,l,a){this._append`Q${+e},${+t},${this._x1=+l},${this._y1=+a}`}bezierCurveTo(e,t,l,a,s,n){this._append`C${+e},${+t},${+l},${+a},${this._x1=+s},${this._y1=+n}`}arcTo(e,t,l,a,s){if(e=+e,t=+t,l=+l,a=+a,s=+s,s<0)throw new Error(`negative radius: ${s}`);let n=this._x1,o=this._y1,r=l-e,h=a-t,p=n-e,b=o-t,O=p*p+b*b;if(this._x1===null)this._append`M${this._x1=e},${this._y1=t}`;else if(O>ue)if(!(Math.abs(b*r-h*p)>ue)||!s)this._append`L${this._x1=e},${this._y1=t}`;else{let C=l-n,j=a-o,B=r*r+h*h,X=C*C+j*j,D=Math.sqrt(B),R=Math.sqrt(O),Q=s*Math.tan((qe-Math.acos((B+O-X)/(2*D*R)))/2),L=Q/R,A=Q/D;Math.abs(L-1)>ue&&this._append`L${e+L*p},${t+L*b}`,this._append`A${s},${s},0,0,${+(b*C>p*j)},${this._x1=e+A*r},${this._y1=t+A*h}`}}arc(e,t,l,a,s,n){if(e=+e,t=+t,l=+l,n=!!n,l<0)throw new Error(`negative radius: ${l}`);let o=l*Math.cos(a),r=l*Math.sin(a),h=e+o,p=t+r,b=1^n,O=n?a-s:s-a;this._x1===null?this._append`M${h},${p}`:(Math.abs(this._x1-h)>ue||Math.abs(this._y1-p)>ue)&&this._append`L${h},${p}`,l&&(O<0&&(O=O%je+je),O>Yt?this._append`A${l},${l},0,1,${b},${e-o},${t-r}A${l},${l},0,1,${b},${this._x1=h},${this._y1=p}`:O>ue&&this._append`A${l},${l},0,${+(O>=qe)},${b},${this._x1=e+l*Math.cos(s)},${this._y1=t+l*Math.sin(s)}`)}rect(e,t,l,a){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}h${l=+l}v${+a}h${-l}Z`}toString(){return this._}}function Ut(i){let e=3;return i.digits=function(t){if(!arguments.length)return e;if(t==null)e=null;else{const l=Math.floor(t);if(!(l>=0))throw new RangeError(`invalid digits: ${t}`);e=l}return i},()=>new Jt(e)}var Zt=Array.prototype.slice;function Kt(i){return i[0]}function Nt(i){return i[1]}class xt{constructor(e,t){this._context=e,this._x=t}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,t){switch(e=+e,t=+t,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,t,e,t):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+t)/2,e,this._y0,e,t);break}}this._x0=e,this._y0=t}}function $t(i){return new xt(i,!1)}function ei(i){return i.source}function ti(i){return i.target}function ii(i){let e=ei,t=ti,l=Kt,a=Nt,s=null,n=null,o=Ut(r);function r(){let h;const p=Zt.call(arguments),b=e.apply(this,p),O=t.apply(this,p);if(s==null&&(n=i(h=o())),n.lineStart(),p[0]=b,n.point(+l.apply(this,p),+a.apply(this,p)),p[0]=O,n.point(+l.apply(this,p),+a.apply(this,p)),n.lineEnd(),h)return n=null,h+""||null}return r.source=function(h){return arguments.length?(e=h,r):e},r.target=function(h){return arguments.length?(t=h,r):t},r.x=function(h){return arguments.length?(l=typeof h=="function"?h:Ge(+h),r):l},r.y=function(h){return arguments.length?(a=typeof h=="function"?h:Ge(+h),r):a},r.context=function(h){return arguments.length?(h==null?s=n=null:n=i(s=h),r):s},r}function ni(){return ii($t)}const Ye=ni().source(i=>i.start).target(i=>i.end);function Fe(i,e,t){const l=i.slice();return l[44]=e[t].id,l[45]=e[t].cachedProps,l[46]=e[t].vizInfo,l[47]=e[t].childNode,l}function Je(i,e,t){const l=i.slice();return l[50]=e[t][0],l[51]=e[t][1],l}function Ue(i){let e,t,l;return{c(){e=x("stop"),this.h()},l(a){e=$(a,"stop",{offset:!0,"stop-opacity":!0,"stop-color":!0,class:!0}),Y(e).forEach(T),this.h()},h(){u(e,"offset",i[50]+"%"),u(e,"stop-opacity",t=i[47].isSelected?"80%":`${i[51]}%`),u(e,"stop-color",l=i[46].colorStr),u(e,"class","svelte-1cwbp37")},m(a,s){K(a,e,s)},p(a,s){s[0]&32768&&t!==(t=a[47].isSelected?"80%":`${a[51]}%`)&&u(e,"stop-opacity",t),s[0]&32768&&l!==(l=a[46].colorStr)&&u(e,"stop-color",l)},d(a){a&&T(e)}}}function Ze(i){let e,t;const l=[i[45],{qcSpec:i[0]},{attributeLabels:i[1]},{visibleTreeInfo:i[2]},{selectionState:i[3]},{levelVisuals:i[4]},{treeWidth:i[5]},{treeXOffset:i[9]},{childHeightRate:i[6]},{overHangRate:i[7]},{preStraightRate:i[8]},{childBaseWidth:i[10]},{linkSurfaceRate:i[11]},{childrenInternalMargin:i[12]},{parentSideMargin:0}];let a={};for(let s=0;s<l.length;s+=1)a=vt(a,l[s]);return e=new gt({props:a}),e.$on("ti",i[35]),{c(){ge(e.$$.fragment)},l(s){pe(e.$$.fragment,s)},m(s,n){de(e,s,n),t=!0},p(s,n){const o=n[0]&40959?Wt(l,[n[0]&32768&&Lt(s[45]),n[0]&1&&{qcSpec:s[0]},n[0]&2&&{attributeLabels:s[1]},n[0]&4&&{visibleTreeInfo:s[2]},n[0]&8&&{selectionState:s[3]},n[0]&16&&{levelVisuals:s[4]},n[0]&32&&{treeWidth:s[5]},n[0]&512&&{treeXOffset:s[9]},n[0]&64&&{childHeightRate:s[6]},n[0]&128&&{overHangRate:s[7]},n[0]&256&&{preStraightRate:s[8]},n[0]&1024&&{childBaseWidth:s[10]},n[0]&2048&&{linkSurfaceRate:s[11]},n[0]&4096&&{childrenInternalMargin:s[12]},l[14]]):{};e.$set(o)},i(s){t||(z(e.$$.fragment,s),t=!0)},o(s){J(e.$$.fragment,s),t=!1},d(s){me(e,s)}}}function Ke(i,e){let t,l,a,s,n,o,r,h,p,b,O,C,j,B,X,D,R,Q,L,A=he([[0,5],[20,15],[50,25]]),P=[];for(let d=0;d<3;d+=1)P[d]=Ue(Je(e,A,d));b=new ct({props:{text:e[47].name,width:e[46].width*.64,height:e[13]*.9,y:e[16]-e[13]*.05,x:e[45].xOffset+e[46].width*.18}});let v=e[47].children&&Ze(e);return{key:i,first:null,c(){t=x("defs"),l=x("linearGradient");for(let d=0;d<3;d+=1)P[d].c();s=oe(),n=x("path"),p=oe(),ge(b.$$.fragment),O=oe(),C=x("rect"),X=oe(),v&&v.c(),D=Se(),this.h()},l(d){t=$(d,"defs",{});var m=Y(t);l=$(m,"linearGradient",{id:!0,gradientTransform:!0});var q=Y(l);for(let S=0;S<3;S+=1)P[S].l(q);q.forEach(T),m.forEach(T),s=ae(d),n=$(d,"path",{d:!0,fill:!0,class:!0}),Y(n).forEach(T),p=ae(d),pe(b.$$.fragment,d),O=ae(d),C=$(d,"rect",{x:!0,y:!0,"fill-opacity":!0,height:!0,width:!0,class:!0}),Y(C).forEach(T),X=ae(d),v&&v.l(d),D=Se(),this.h()},h(){u(l,"id",a="path-grad-"+e[46].strId),u(l,"gradientTransform","rotate(90)"),u(n,"d",o=e[46].linkPath),u(n,"fill",r="url('#path-grad-"+e[46].strId+"')"),u(n,"class","svelte-1cwbp37"),u(C,"x",j=e[45].xOffset),u(C,"y",e[14]),u(C,"fill-opacity","0"),u(C,"height",e[13]),u(C,"width",B=e[46].width),u(C,"class","svelte-1cwbp37"),this.first=t},m(d,m){K(d,t,m),F(t,l);for(let q=0;q<3;q+=1)P[q]&&P[q].m(l,null);K(d,s,m),K(d,n,m),K(d,p,m),de(b,d,m),K(d,O,m),K(d,C,m),K(d,X,m),v&&v.m(d,m),K(d,D,m),R=!0,Q||(L=[ke(C,"mouseover",function(){Le(be(e[17],"highlight",e[45].pathInCompleteTree,e[45].xOffset+e[45].width/2,e[14]))&&be(e[17],"highlight",e[45].pathInCompleteTree,e[45].xOffset+e[45].width/2,e[14]).apply(this,arguments)}),ke(C,"mouseleave",function(){Le(be(e[17],"de-highlight",e[45].pathInCompleteTree,0,0))&&be(e[17],"de-highlight",e[45].pathInCompleteTree,0,0).apply(this,arguments)}),ke(C,"click",function(){Le(be(e[17],"toggle-select",e[45].pathInCompleteTree,0,0))&&be(e[17],"toggle-select",e[45].pathInCompleteTree,0,0).apply(this,arguments)})],Q=!0)},p(d,m){if(e=d,m[0]&32768){A=he([[0,5],[20,15],[50,25]]);let S;for(S=0;S<3;S+=1){const y=Je(e,A,S);P[S]?P[S].p(y,m):(P[S]=Ue(y),P[S].c(),P[S].m(l,null))}for(;S<3;S+=1)P[S].d(1)}(!R||m[0]&32768&&a!==(a="path-grad-"+e[46].strId))&&u(l,"id",a),(!R||m[0]&32768&&o!==(o=e[46].linkPath))&&u(n,"d",o),(!R||m[0]&32768&&r!==(r="url('#path-grad-"+e[46].strId+"')"))&&u(n,"fill",r);const q={};m[0]&32768&&(q.text=e[47].name),m[0]&32768&&(q.width=e[46].width*.64),m[0]&8192&&(q.height=e[13]*.9),m[0]&73728&&(q.y=e[16]-e[13]*.05),m[0]&32768&&(q.x=e[45].xOffset+e[46].width*.18),b.$set(q),(!R||m[0]&32768&&j!==(j=e[45].xOffset))&&u(C,"x",j),(!R||m[0]&16384)&&u(C,"y",e[14]),(!R||m[0]&8192)&&u(C,"height",e[13]),(!R||m[0]&32768&&B!==(B=e[46].width))&&u(C,"width",B),e[47].children?v?(v.p(e,m),m[0]&32768&&z(v,1)):(v=Ze(e),v.c(),z(v,1),v.m(D.parentNode,D)):v&&(Ie(),J(v,1,1,()=>{v=null}),Oe())},i(d){R||(d&&Ee(()=>{R&&(h||(h=Te(n,Ce,{duration:300},!0)),h.run(1))}),z(b.$$.fragment,d),z(v),R=!0)},o(d){d&&(h||(h=Te(n,Ce,{duration:300},!1)),h.run(0)),J(b.$$.fragment,d),J(v),R=!1},d(d){d&&(T(t),T(s),T(n),T(p),T(O),T(C),T(X),T(D)),He(P,d),d&&h&&h.end(),me(b,d),v&&v.d(d),Q=!1,wt(L)}}}function li(i){let e=[],t=new Map,l,a,s=he(i[15]);const n=o=>o[44];for(let o=0;o<s.length;o+=1){let r=Fe(i,s,o),h=n(r);t.set(h,e[o]=Ke(h,r))}return{c(){for(let o=0;o<e.length;o+=1)e[o].c();l=Se()},l(o){for(let r=0;r<e.length;r+=1)e[r].l(o);l=Se()},m(o,r){for(let h=0;h<e.length;h+=1)e[h]&&e[h].m(o,r);K(o,l,r),a=!0},p(o,r){r[0]&262143&&(s=he(o[15]),Ie(),e=Et(e,r,n,1,o,s,t,l.parentNode,Mt,Ke,l,Fe),Oe())},i(o){if(!a){for(let r=0;r<s.length;r+=1)z(e[r]);a=!0}},o(o){for(let r=0;r<e.length;r+=1)J(e[r]);a=!1},d(o){o&&T(l);for(let r=0;r<e.length;r+=1)e[r].d(o)}}}function Ne(i,e,t,l,a,s,n){const o=p=>a*(p||0)/s,r=l+o(e),h=i+((t==null?void 0:t.rank)||0)*(l+n)+o(t==null?void 0:t.weight);return{width:r,xOffset:h}}function ri(i,e,t){let l,a,s,n,o,r,h,p,b,O,C,j,B,X,D,R,Q,L,A,P,{qcSpec:v}=e,{attributeLabels:d}=e,{visibleTreeInfo:m}=e,{selectionState:q}=e,{levelVisuals:S=[]}=e,{pathInCompleteTree:y=[]}=e,{branchReachBack:le=0}=e,{rootWidth:te=30}=e,{treeWidth:V=70}=e,{childHeightRate:k=.2}=e,{overHangRate:ie=.05}=e,{preStraightRate:E=.05}=e,{treeXOffset:re=0}=e,{childBaseWidth:f=2.9}=e,{linkSurfaceRate:c=.8}=e,{childrenInternalMargin:H=.9}=e,{parentSideMargin:W=.8}=e,{width:Z=te}=e,{xOffset:N=(V-te)/2+re}=e;const w=At(),G=g=>g===void 0?0:g;function Me(g,U){var ze;const _={pathInCompleteTree:[...y,g],...Ne(re,U.weight,U==null?void 0:U.totalOffsetOnLevel,f,A,((ze=m.meta[a])==null?void 0:ze.totalWeight)||1,H)},I=Ne(N+W,U.weight,U==null?void 0:U.totalOffsetAmongSiblings,L,R*(n>1?c:1)-L*n,(s==null?void 0:s.childrenSumWeight)||1,Q),M={parent:I.width,child:_.width},ne={start:[I.xOffset,j],end:[_.xOffset,B]},ee={start:[ne.end[0]+M.child,B],end:[ne.start[0]+M.parent,j]},Ve=b+(U.isSelected?C:0),dt=`${Ye(ne)} v ${Ve}`,mt=`v ${-Ve} C${Ye(ee).split("C").pop()} v ${-D}`,bt=`${dt} h ${M.child} ${mt} h ${-M.parent}z`;return{id:g,cachedProps:_,vizInfo:{linkPath:bt,width:M.child,colorStr:Dt(U.scaleEnds.mid),strId:_.pathInCompleteTree.join("-")},childNode:U}}function Be(g,U){return Object.entries((g==null?void 0:g.children)||{}).map(([_,I])=>Me(_,I))}function We(g){St.call(this,i,g)}return i.$$set=g=>{"qcSpec"in g&&t(0,v=g.qcSpec),"attributeLabels"in g&&t(1,d=g.attributeLabels),"visibleTreeInfo"in g&&t(2,m=g.visibleTreeInfo),"selectionState"in g&&t(3,q=g.selectionState),"levelVisuals"in g&&t(4,S=g.levelVisuals),"pathInCompleteTree"in g&&t(18,y=g.pathInCompleteTree),"branchReachBack"in g&&t(19,le=g.branchReachBack),"rootWidth"in g&&t(20,te=g.rootWidth),"treeWidth"in g&&t(5,V=g.treeWidth),"childHeightRate"in g&&t(6,k=g.childHeightRate),"overHangRate"in g&&t(7,ie=g.overHangRate),"preStraightRate"in g&&t(8,E=g.preStraightRate),"treeXOffset"in g&&t(9,re=g.treeXOffset),"childBaseWidth"in g&&t(10,f=g.childBaseWidth),"linkSurfaceRate"in g&&t(11,c=g.linkSurfaceRate),"childrenInternalMargin"in g&&t(12,H=g.childrenInternalMargin),"parentSideMargin"in g&&t(21,W=g.parentSideMargin),"width"in g&&t(22,Z=g.width),"xOffset"in g&&t(23,N=g.xOffset)},i.$$.update=()=>{var g;i.$$.dirty[0]&262144&&t(34,l=y.length),i.$$.dirty[1]&8&&t(29,a=l+1),i.$$.dirty[0]&262148&&t(25,s=Pe(y,m.tree)),i.$$.dirty[0]&33554432&&t(27,n=Object.keys((s==null?void 0:s.children)||{}).length),i.$$.dirty[0]&16|i.$$.dirty[1]&8&&t(24,o=S[l]),i.$$.dirty[0]&536870916&&t(30,r=((g=m.meta[a])==null?void 0:g.totalNodes)||0),i.$$.dirty[0]&16777216&&t(33,h=G(o==null?void 0:o.topOffset)),i.$$.dirty[0]&16777664&&t(32,[p,b,O,C]=[1-k-E-ie,k,E,ie].map(U=>G((o==null?void 0:o.totalSize)*U)),p,(t(13,b),t(6,k),t(8,E),t(7,ie),t(24,o),t(4,S),t(34,l),t(18,y)),(t(31,O),t(6,k),t(8,E),t(7,ie),t(24,o),t(4,S),t(34,l),t(18,y))),i.$$.dirty[1]&5&&t(26,j=h+O),i.$$.dirty[0]&67108864|i.$$.dirty[1]&2&&t(14,B=j+p),i.$$.dirty[0]&24576&&t(16,X=B+b),i.$$.dirty[0]&524288|i.$$.dirty[1]&1&&(D=le+O),i.$$.dirty[0]&6291456&&t(28,R=Z-2*W),i.$$.dirty[0]&402655232&&(Q=R*(1-c)/(n>1?n-1:1)),i.$$.dirty[0]&402655232&&(L=R*c/(n*1.8)),i.$$.dirty[0]&1073746976&&(A=V-f*r-H*(r-1)),i.$$.dirty[0]&50331648&&t(15,P=Be(s))},[v,d,m,q,S,V,k,ie,E,re,f,c,H,b,B,P,X,w,y,le,te,W,Z,N,o,s,j,n,R,a,r,O,p,h,l,We]}class gt extends ht{constructor(e){super(),ft(this,e,ri,li,st,{qcSpec:0,attributeLabels:1,visibleTreeInfo:2,selectionState:3,levelVisuals:4,pathInCompleteTree:18,branchReachBack:19,rootWidth:20,treeWidth:5,childHeightRate:6,overHangRate:7,preStraightRate:8,treeXOffset:9,childBaseWidth:10,linkSurfaceRate:11,childrenInternalMargin:12,parentSideMargin:21,width:22,xOffset:23},null,[-1,-1])}}function xe(i,e,t){const l=i.slice();return l[46]=e[t],l[48]=t,l}function $e(i,e,t){const l=i.slice();return l[49]=e[t][0],l[50]=e[t][1],l}function et(i){var re;let e,t,l,a,s,n,o,r,h,p,b,O,C="Infobox on Hover",j,B,X,D,R,Q,L,A,P,v,d,m,q=!1,S=he(Object.entries(i[17])),y=[];for(let f=0;f<S.length;f+=1)y[f]=tt($e(i,S,f));function le(f){i[32](f)}let te={values:[!0,!1],labels:["On","Off"]};i[4]!==void 0&&(te.value=i[4]),B=new Xt({props:te}),ot.push(()=>ut(B,"value",le));let V=he(i[19]||[]),k=[];for(let f=0;f<V.length;f+=1)k[f]=it(xe(i,V,f));const ie=f=>J(k[f],1,1,()=>{k[f]=null});L=new gt({props:{qcSpec:i[6],branchReachBack:i[20],xOffset:i[25],rootWidth:ye,attributeLabels:i[9],visibleTreeInfo:i[13],selectionState:i[12],levelVisuals:i[19],treeWidth:i[23],treeXOffset:i[24],childHeightRate:i[16],overHangRate:pt,childBaseWidth:hi}}),L.$on("ti",i[27]),A=new ct({props:{height:i[20]-2,width:ye*.8,text:((re=i[8])==null?void 0:re.name)||"",anchor:"middle",x:i[25]+ye/2,y:-1}});let E=i[18]!=null&&nt(i);return{c(){e=x("svg"),t=x("rect"),a=x("rect"),n=x("foreignObject"),o=ce("div"),r=ce("div"),h=ce("select");for(let f=0;f<y.length;f+=1)y[f].c();p=oe(),b=ce("div"),O=ce("span"),O.textContent=C,j=oe(),ge(B.$$.fragment),D=oe();for(let f=0;f<k.length;f+=1)k[f].c();Q=Se(),ge(L.$$.fragment),ge(A.$$.fragment),E&&E.c(),this.h()},l(f){e=$(f,"svg",{viewBox:!0,xmlns:!0});var c=Y(e);t=$(c,"rect",{fill:!0,"fill-opacity":!0,x:!0,y:!0,height:!0,width:!0}),Y(t).forEach(T),a=$(c,"rect",{id:!0,y:!0,x:!0,width:!0,height:!0,class:!0}),Y(a).forEach(T),n=$(c,"foreignObject",{y:!0,width:!0,height:!0,transform:!0});var H=Y(n);o=_e(H,"DIV",{style:!0});var W=Y(o);r=_e(W,"DIV",{id:!0,class:!0});var Z=Y(r);h=_e(Z,"SELECT",{class:!0});var N=Y(h);for(let G=0;G<y.length;G+=1)y[G].l(N);N.forEach(T),Z.forEach(T),p=ae(W),b=_e(W,"DIV",{id:!0,class:!0});var w=Y(b);O=_e(w,"SPAN",{class:!0,"data-svelte-h":!0}),Ot(O)!=="svelte-1amfah6"&&(O.textContent=C),j=ae(w),pe(B.$$.fragment,w),w.forEach(T),D=ae(W),W.forEach(T),H.forEach(T);for(let G=0;G<k.length;G+=1)k[G].l(c);Q=Se(),pe(L.$$.fragment,c),pe(A.$$.fragment,c),E&&E.l(c),c.forEach(T),this.h()},h(){u(t,"fill","grey"),u(t,"fill-opacity",.3),u(t,"x",0),u(t,"y",l=-i[20]),u(t,"height",i[20]),u(t,"width",fe),u(a,"id","qc-header"),u(a,"y",s=-i[20]),u(a,"x",i[25]),u(a,"width",ye),u(a,"height",i[20]),u(a,"class","svelte-14evmle"),u(h,"class","svelte-14evmle"),i[5]===void 0&&Ee(()=>i[31].call(h)),u(r,"id","qc-type-selector"),u(r,"class","svelte-14evmle"),u(O,"class","svelte-14evmle"),u(b,"id","hover-check"),u(b,"class","svelte-14evmle"),ve(o,"padding","20px"),u(n,"y",R=-i[20]/se),u(n,"width",we/se),u(n,"height",500),u(n,"transform","scale("+se+","+se+")"),u(e,"viewBox",P="0 "+(-i[20]-i[21])+" "+fe+" "+i[14]),u(e,"xmlns","http://www.w3.org/2000/svg")},m(f,c){K(f,e,c),F(e,t),F(e,a),F(e,n),F(n,o),F(o,r),F(r,h);for(let H=0;H<y.length;H+=1)y[H]&&y[H].m(h,null);De(h,i[5],!0),F(o,p),F(o,b),F(b,O),F(b,j),de(B,b,null),F(o,D);for(let H=0;H<k.length;H+=1)k[H]&&k[H].m(e,null);F(e,Q),de(L,e,null),de(A,e,null),E&&E.m(e,null),v=!0,d||(m=ke(h,"change",i[31]),d=!0)},p(f,c){var N;if((!v||c[0]&1048576&&l!==(l=-f[20]))&&u(t,"y",l),(!v||c[0]&1048576)&&u(t,"height",f[20]),(!v||c[0]&1048576&&s!==(s=-f[20]))&&u(a,"y",s),(!v||c[0]&1048576)&&u(a,"height",f[20]),c[0]&131072){S=he(Object.entries(f[17]));let w;for(w=0;w<S.length;w+=1){const G=$e(f,S,w);y[w]?y[w].p(G,c):(y[w]=tt(G),y[w].c(),y[w].m(h,null))}for(;w<y.length;w+=1)y[w].d(1);y.length=S.length}c[0]&131104&&De(h,f[5]);const H={};if(!X&&c[0]&16&&(X=!0,H.value=f[4],at(()=>X=!1)),B.$set(H),(!v||c[0]&1048576&&R!==(R=-f[20]/se))&&u(n,"y",R),c[0]&67700296){V=he(f[19]||[]);let w;for(w=0;w<V.length;w+=1){const G=xe(f,V,w);k[w]?(k[w].p(G,c),z(k[w],1)):(k[w]=it(G),k[w].c(),z(k[w],1),k[w].m(e,Q))}for(Ie(),w=V.length;w<k.length;w+=1)ie(w);Oe()}const W={};c[0]&64&&(W.qcSpec=f[6]),c[0]&1048576&&(W.branchReachBack=f[20]),c[0]&512&&(W.attributeLabels=f[9]),c[0]&8192&&(W.visibleTreeInfo=f[13]),c[0]&4096&&(W.selectionState=f[12]),c[0]&524288&&(W.levelVisuals=f[19]),c[0]&65536&&(W.childHeightRate=f[16]),L.$set(W);const Z={};c[0]&1048576&&(Z.height=f[20]-2),c[0]&256&&(Z.text=((N=f[8])==null?void 0:N.name)||""),A.$set(Z),f[18]!=null?E?(E.p(f,c),c[0]&262144&&z(E,1)):(E=nt(f),E.c(),z(E,1),E.m(e,null)):E&&(Ie(),J(E,1,1,()=>{E=null}),Oe()),(!v||c[0]&3162112&&P!==(P="0 "+(-f[20]-f[21])+" "+fe+" "+f[14]))&&u(e,"viewBox",P)},i(f){if(!v){z(q),z(B.$$.fragment,f);for(let c=0;c<V.length;c+=1)z(k[c]);z(L.$$.fragment,f),z(A.$$.fragment,f),z(E),v=!0}},o(f){J(q),J(B.$$.fragment,f),k=k.filter(Boolean);for(let c=0;c<k.length;c+=1)J(k[c]);J(L.$$.fragment,f),J(A.$$.fragment,f),J(E),v=!1},d(f){f&&T(e),He(y,f),me(B),He(k,f),me(L),me(A),E&&E.d(),d=!1,m()}}}function tt(i){let e,t=i[50].title+"",l,a,s;return{c(){e=ce("option"),l=yt(t),a=oe(),this.h()},l(n){e=_e(n,"OPTION",{class:!0});var o=Y(e);l=Rt(o,t),a=ae(o),o.forEach(T),this.h()},h(){e.__value=s=i[49],Ae(e,e.__value),u(e,"class","svelte-14evmle")},m(n,o){K(n,e,o),F(e,l),F(e,a)},p(n,o){o[0]&131072&&t!==(t=n[50].title+"")&&Tt(l,t),o[0]&131072&&s!==(s=n[49])&&(e.__value=s,Ae(e,e.__value))},d(n){n&&T(e)}}}function it(i){let e,t,l;function a(n){i[33](n)}let s={lVis:i[46],index:i[48],childHeightRate:i[16],overHangRate:pt,sideBarWidth:we,svgWidth:fe,currentQcSpec:i[6],expandedIndex:i[3],attributeLabels:i[9]};return i[10]!==void 0&&(s.controlSpecs=i[10]),e=new Qt({props:s}),ot.push(()=>ut(e,"controlSpecs",a)),e.$on("ce",i[26]),{c(){ge(e.$$.fragment)},l(n){pe(e.$$.fragment,n)},m(n,o){de(e,n,o),l=!0},p(n,o){const r={};o[0]&524288&&(r.lVis=n[46]),o[0]&65536&&(r.childHeightRate=n[16]),o[0]&64&&(r.currentQcSpec=n[6]),o[0]&8&&(r.expandedIndex=n[3]),o[0]&512&&(r.attributeLabels=n[9]),!t&&o[0]&1024&&(t=!0,r.controlSpecs=n[10],at(()=>t=!1)),e.$set(r)},i(n){l||(z(e.$$.fragment,n),l=!0)},o(n){J(e.$$.fragment,n),l=!1},d(n){me(e,n)}}}function nt(i){var o;let e,t,l,a,s,n;return a=new Gt({props:{path:i[2],weightedRoot:i[11],specBaselineOptions:i[7],attributeLabels:i[9],qcSpec:i[6],rootId:(o=i[8])==null?void 0:o.id}}),{c(){e=x("g"),t=x("rect"),l=x("foreignObject"),ge(a.$$.fragment),this.h()},l(r){e=$(r,"g",{style:!0});var h=Y(e);t=$(h,"rect",{id:!0,height:!0,width:!0,fill:!0,"fill-opacity":!0,stroke:!0,"stroke-width":!0,rx:!0,class:!0}),Y(t).forEach(T),l=$(h,"foreignObject",{height:!0,width:!0,transform:!0});var p=Y(l);pe(a.$$.fragment,p),p.forEach(T),h.forEach(T),this.h()},h(){u(t,"id","hover-rect"),u(t,"height",Re),u(t,"width",i[22]),u(t,"fill","var(--color-theme-white)"),u(t,"fill-opacity","0.85"),u(t,"stroke","black"),u(t,"stroke-width","0.1px"),u(t,"rx","0.2"),u(t,"class","svelte-14evmle"),u(l,"height",Re/se),u(l,"width",i[22]/se),u(l,"transform","scale("+se+","+se+")"),ve(e,"--x-off",i[18].position.x-i[22]+"px"),ve(e,"--y-off",i[18].position.y-Re+"px")},m(r,h){K(r,e,h),F(e,t),F(e,l),de(a,l,null),n=!0},p(r,h){var b;const p={};h[0]&4&&(p.path=r[2]),h[0]&2048&&(p.weightedRoot=r[11]),h[0]&128&&(p.specBaselineOptions=r[7]),h[0]&512&&(p.attributeLabels=r[9]),h[0]&64&&(p.qcSpec=r[6]),h[0]&256&&(p.rootId=(b=r[8])==null?void 0:b.id),a.$set(p),(!n||h[0]&262144)&&ve(e,"--x-off",r[18].position.x-r[22]+"px"),(!n||h[0]&262144)&&ve(e,"--y-off",r[18].position.y-Re+"px")},i(r){n||(z(a.$$.fragment,r),r&&Ee(()=>{n&&(s||(s=Te(e,Ce,{duration:100},!0)),s.run(1))}),n=!0)},o(r){J(a.$$.fragment,r),r&&(s||(s=Te(e,Ce,{duration:100},!1)),s.run(0)),n=!1},d(r){r&&T(e),me(a),r&&s&&s.end()}}}function si(i){let e,t=![i[20],fe,i[14]].includes(NaN),l,a,s;Ee(i[30]);let n=t&&et(i);return{c(){e=ce("div"),n&&n.c(),this.h()},l(o){e=_e(o,"DIV",{class:!0});var r=Y(e);n&&n.l(r),r.forEach(T),this.h()},h(){u(e,"class","treefix svelte-14evmle")},m(o,r){K(o,e,r),n&&n.m(e,null),l=!0,a||(s=ke(window,"resize",i[30]),a=!0)},p(o,r){r[0]&1064960&&(t=![o[20],fe,o[14]].includes(NaN)),t?n?(n.p(o,r),r[0]&1064960&&z(n,1)):(n=et(o),n.c(),z(n,1),n.m(e,null)):n&&(Ie(),J(n,1,1,()=>{n=null}),Oe())},i(o){l||(z(n),l=!0)},o(o){J(n),l=!1},d(o){o&&T(e),n&&n.d(),a=!1,s()}}}const lt=.3;let fe=100,ye=25,we=17,pt=.05,oi=.03,rt=.12,ai=.85,hi=2.5,Re=12.5,se=.035;function fi(i,e){let t=new RegExp("\\{pc_id\\}","gi");return i.replace(t,e)}function ui(i,e,t){let l,a,s,n,o,r,h,p;kt(i,Bt,_=>t(36,p=_));const b={ce:_=>N(parseInt(_)),se:_=>w(_.split("-")),sp:_=>{const I=parseInt(_);I<c.length&&t(10,c[I].size_base="specialization",c)},qc:_=>{Object.keys(m).includes(_)&&t(5,S=_)},mi:_=>{const I=parseInt(_.slice(0,1));I<c.length&&t(10,c[I].include=_.slice(1).split(","),c)}};async function O(_){if(_.length!=0)for(const I of _.split(";")){const M=I.slice(0,2),ne=I.slice(2);if(M=="sl")await new Promise(ee=>setTimeout(ee,parseFloat(ne)*1e3));else{const ee=b[M];ee!=null&&ee(ne)}}}let C=[],j,B,X=[],D=[],R,Q=lt,L=!0,A=we*.85,P=fe-we-2,v=we+1,d=P*.15+we,m={},q=[],S,y,le={},te,V,k={};const ie=_=>({id:_[0],name:_[1].title});It(()=>{Xe("root-descriptions",_=>{te=_[p.params.rootType],t(8,V=te.filter(I=>I.id==p.params.rootId)[0])}),qt().then(([_,I,M])=>{t(17,m=Object.fromEntries(Object.entries(I).filter(([ne,ee])=>ee.root_entity_type==p.params.rootType))),q=Object.entries(m).map(ie),t(5,S=q[0].id),t(9,k=_),t(7,le=M),O(p.url.searchParams.get("e")||"")})});function E(_,I){_==null||I==null||(Ht(`${Pt}/view/${p.params.rootType}/${I}${p.url.search}`),Xe(`qc-builds/${_}/${I}`,M=>{t(11,[H,c,W,y,c]=[M,c,{children:{}},m[S],f(_,I)],H,t(10,c),t(12,W),t(6,y))}))}function re(_,I,M){return I&&_.length>0?{node:Pe(_,o.tree),position:M}:void 0}function f(_,I){const M=[];for(var ne of m[_].bifurcations)M.push({...Qe,...JSON.parse(fi(ne.control_format_str,I))});return M}let c=[Qe],H={weight:1},W={children:{}},Z={x:0,y:0};function N(_){_==R?(t(3,R=void 0),t(16,Q=lt)):(t(3,R=_),t(16,Q=.5))}function w(_){var ee;C.push(`se${_.join("-")}`);const I=_[_.length-1];let M=Pe(_.slice(0,_.length-1),W);if((M==null?void 0:M.children)===void 0)return;Object.keys(M.children).includes(I)?(delete M.children[I],t(15,D=zt(W))):(t(15,D=_),M.children[I]={children:((ee=M.children[I])==null?void 0:ee.children)||{}}),t(12,W)}const G=_=>N(_.detail.ind);function Me(_){const I=_.detail.path,M=_.detail.action;if(M=="highlight"){t(28,[Z,X]=[_.detail.topLeftCorner,I],Z,t(2,X));return}else if(M=="de-highlight"){t(2,X=[]);return}w(I)}function Be(){t(1,B=window.innerWidth),t(0,j=window.innerHeight)}function We(){S=Ct(this),t(5,S),t(17,m)}function g(_){L=_,t(4,L)}function U(_){c=_,t(10,c)}return i.$$.update=()=>{i.$$.dirty[0]&3&&t(14,l=j/B*fe-5),i.$$.dirty[0]&16384&&t(21,a=l*oi),i.$$.dirty[0]&16384&&t(20,s=l*rt),i.$$.dirty[0]&16384&&t(29,n=l*(1-rt)*ai),i.$$.dirty[0]&288&&E(S,V==null?void 0:V.id),i.$$.dirty[0]&8128&&t(13,o=jt(V==null?void 0:V.id,H,c,W,k,y,le)),i.$$.dirty[0]&536879112&&t(19,r=Vt(o,n,R)),i.$$.dirty[0]&268435476&&t(18,h=re(X,L,Z))},[j,B,X,R,L,S,y,le,V,k,c,H,W,o,l,D,Q,m,h,r,s,a,A,P,v,d,G,Me,Z,n,Be,We,g,U]}class Oi extends ht{constructor(e){super(),ft(this,e,ui,si,st,{},null,[-1,-1])}}export{Oi as component};
