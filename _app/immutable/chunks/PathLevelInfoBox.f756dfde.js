import{s as qe,e as de,i as N,C as Ce,d as m,f as w,a as U,l as u,g as D,h as C,c as q,m as _,j as V,y as s,n as R,x as We,E as Ue}from"./scheduler.c71c511d.js";import{e as me}from"./each.19beb08f.js";import{S as Xe,i as Je}from"./index.7d58e6c4.js";import{f as Q}from"./text-format-util.859e8f55.js";import{c as Qe,e as Pe,f as Ye,g as Ze,j as Ne,s as xe}from"./tree-loading.d125fe8e.js";function Oe(l,e,t){const n=l.slice();return n[22]=e[t].baseKind,n[23]=e[t].specMetricObj,n}function Me(l,e,t){const n=l.slice();return n[26]=e[t],n}function Ae(l){let e,t,n,i,a,r,h=Q(l[10].num)+"",f,o,d,c,B,S=(l[10].num/l[10].comparison).toFixed(2)+"",k,y,g,E,v=Q(l[10].comparison)+"",T,te,Y=l[5].name+"",x,le,O,b,M=Re(l[9].specMetric)+"",F,j,K,A,L,Z=(l[9].nodeRate*100).toFixed(2)+"",X,be,ve,pe,H,ie=(l[9].baselineRate*100).toFixed(2)+"",ae,ge,ne=Q(l[9].nodeDivisor*l[9].baselineRate)+"",re,Ee,oe=l[6].name+"",fe,ye,se=l[2].root_entity_type+"",ce,ke,Ie;function Be(p,I){return p[4]==0?et:$e}let he=Be(l),G=he(l),P=l[10].num>1&&Ve(),z=l[4]>0&&je(l);return{c(){e=w("div"),t=w("div"),G.c(),n=U(),i=w("div"),a=w("div"),r=w("h3"),f=u(h),o=u(" citation"),P&&P.c(),d=U(),c=w("p"),B=w("b"),k=u(S),y=u(" times the average "),g=u(l[7]),E=u(`
					(`),T=u(v),te=u(") under "),x=u(Y),le=U(),O=w("div"),b=w("h3"),F=u(M),j=u(" Specialization"),K=U(),A=w("p"),L=w("b"),X=u(Z),be=u("%"),ve=u(" of total impact"),pe=U(),H=w("p"),ae=u(ie),ge=u("% ("),re=u(ne),Ee=u(" citations) expected based on "),fe=u(oe),ye=u(" impact rate of all "),ce=u(se),ke=u("s"),Ie=U(),z&&z.c(),this.h()},l(p){e=D(p,"DIV",{class:!0});var I=C(e);t=D(I,"DIV",{id:!0,class:!0});var Fe=C(t);G.l(Fe),Fe.forEach(m),n=q(I),i=D(I,"DIV",{class:!0});var $=C(i);a=D($,"DIV",{id:!0,class:!0});var ue=C(a);r=D(ue,"H3",{});var _e=C(r);f=_(_e,h),o=_(_e," citation"),P&&P.l(_e),_e.forEach(m),d=q(ue),c=D(ue,"P",{});var J=C(c);B=D(J,"B",{});var ze=C(B);k=_(ze,S),ze.forEach(m),y=_(J," times the average "),g=_(J,l[7]),E=_(J,`
					(`),T=_(J,v),te=_(J,") under "),x=_(J,Y),J.forEach(m),ue.forEach(m),le=q($),O=D($,"DIV",{id:!0,class:!0});var ee=C(O);b=D(ee,"H3",{});var we=C(b);F=_(we,M),j=_(we," Specialization"),we.forEach(m),K=q(ee),A=D(ee,"P",{});var De=C(A);L=D(De,"B",{});var Se=C(L);X=_(Se,Z),be=_(Se,"%"),Se.forEach(m),ve=_(De," of total impact"),De.forEach(m),pe=q(ee),H=D(ee,"P",{});var W=C(H);ae=_(W,ie),ge=_(W,"% ("),re=_(W,ne),Ee=_(W," citations) expected based on "),fe=_(W,oe),ye=_(W," impact rate of all "),ce=_(W,se),ke=_(W,"s"),W.forEach(m),ee.forEach(m),Ie=q($),z&&z.l($),$.forEach(m),I.forEach(m),this.h()},h(){V(t,"id","title-row"),V(t,"class","svelte-1twz3mm"),V(a,"id","volume-col"),V(a,"class","svelte-1twz3mm"),V(O,"id","spec-col"),V(O,"class","svelte-1twz3mm"),V(i,"class","detail-cols svelte-1twz3mm"),V(e,"class","box-container svelte-1twz3mm")},m(p,I){N(p,e,I),s(e,t),G.m(t,null),s(e,n),s(e,i),s(i,a),s(a,r),s(r,f),s(r,o),P&&P.m(r,null),s(a,d),s(a,c),s(c,B),s(B,k),s(c,y),s(c,g),s(c,E),s(c,T),s(c,te),s(c,x),s(i,le),s(i,O),s(O,b),s(b,F),s(b,j),s(O,K),s(O,A),s(A,L),s(L,X),s(L,be),s(A,ve),s(O,pe),s(O,H),s(H,ae),s(H,ge),s(H,re),s(H,Ee),s(H,fe),s(H,ye),s(H,ce),s(H,ke),s(i,Ie),z&&z.m(i,null)},p(p,I){he===(he=Be(p))&&G?G.p(p,I):(G.d(1),G=he(p),G&&(G.c(),G.m(t,null))),I&1024&&h!==(h=Q(p[10].num)+"")&&R(f,h),p[10].num>1?P||(P=Ve(),P.c(),P.m(r,null)):P&&(P.d(1),P=null),I&1024&&S!==(S=(p[10].num/p[10].comparison).toFixed(2)+"")&&R(k,S),I&128&&R(g,p[7]),I&1024&&v!==(v=Q(p[10].comparison)+"")&&R(T,v),I&32&&Y!==(Y=p[5].name+"")&&R(x,Y),I&512&&M!==(M=Re(p[9].specMetric)+"")&&R(F,M),I&512&&Z!==(Z=(p[9].nodeRate*100).toFixed(2)+"")&&R(X,Z),I&512&&ie!==(ie=(p[9].baselineRate*100).toFixed(2)+"")&&R(ae,ie),I&512&&ne!==(ne=Q(p[9].nodeDivisor*p[9].baselineRate)+"")&&R(re,ne),I&64&&oe!==(oe=p[6].name+"")&&R(fe,oe),I&4&&se!==(se=p[2].root_entity_type+"")&&R(ce,se),p[4]>0?z?z.p(p,I):(z=je(p),z.c(),z.m(i,null)):z&&(z.d(1),z=null)},d(p){p&&m(e),G.d(),P&&P.d(),z&&z.d()}}}function $e(l){let e,t,n=l[3][l[2].root_entity_type][l[0]].name+"",i,a,r,h=me(l[8]),f=[];for(let o=0;o<h.length;o+=1)f[o]=Le(Me(l,h,o));return{c(){e=w("h2"),t=u("Papers published by "),i=u(n),a=U();for(let o=0;o<f.length;o+=1)f[o].c();r=de(),this.h()},l(o){e=D(o,"H2",{class:!0});var d=C(e);t=_(d,"Papers published by "),i=_(d,n),d.forEach(m),a=q(o);for(let c=0;c<f.length;c+=1)f[c].l(o);r=de(),this.h()},h(){V(e,"class","svelte-1twz3mm")},m(o,d){N(o,e,d),s(e,t),s(e,i),N(o,a,d);for(let c=0;c<f.length;c+=1)f[c]&&f[c].m(o,d);N(o,r,d)},p(o,d){if(d&13&&n!==(n=o[3][o[2].root_entity_type][o[0]].name+"")&&R(i,n),d&256){h=me(o[8]);let c;for(c=0;c<h.length;c+=1){const B=Me(o,h,c);f[c]?f[c].p(B,d):(f[c]=Le(B),f[c].c(),f[c].m(r.parentNode,r))}for(;c<f.length;c+=1)f[c].d(1);f.length=h.length}},d(o){o&&(m(e),m(a),m(r)),Ue(f,o)}}}function et(l){let e,t=l[6].name+"",n;return{c(){e=w("h2"),n=u(t),this.h()},l(i){e=D(i,"H2",{class:!0});var a=C(e);n=_(a,t),a.forEach(m),this.h()},h(){V(e,"class","svelte-1twz3mm")},m(i,a){N(i,e,a),s(e,n)},p(i,a){a&64&&t!==(t=i[6].name+"")&&R(n,t)},d(i){i&&m(e)}}}function Le(l){let e,t,n=l[26].prefixStr+"",i,a,r=l[26].entityName+"",h,f;return{c(){e=w("div"),t=w("h2"),i=u(n),a=U(),h=u(r),f=U(),this.h()},l(o){e=D(o,"DIV",{class:!0});var d=C(e);t=D(d,"H2",{class:!0});var c=C(t);i=_(c,n),a=q(c),h=_(c,r),c.forEach(m),f=q(d),d.forEach(m),this.h()},h(){V(t,"class","svelte-1twz3mm"),V(e,"class","title-elem svelte-1twz3mm")},m(o,d){N(o,e,d),s(e,t),s(t,i),s(t,a),s(t,h),s(e,f)},p(o,d){d&256&&n!==(n=o[26].prefixStr+"")&&R(i,n),d&256&&r!==(r=o[26].entityName+"")&&R(h,r)},d(o){o&&m(e)}}}function Ve(l){let e;return{c(){e=u("s")},l(t){e=_(t,"s")},m(t,n){N(t,e,n)},d(t){t&&m(e)}}}function je(l){let e,t,n="Specialization Details",i,a=me(l[11]),r=[];for(let h=0;h<a.length;h+=1)r[h]=Te(Oe(l,a,h));return{c(){e=w("div"),t=w("h3"),t.textContent=n,i=U();for(let h=0;h<r.length;h+=1)r[h].c();this.h()},l(h){e=D(h,"DIV",{class:!0});var f=C(e);t=D(f,"H3",{"data-svelte-h":!0}),We(t)!=="svelte-1lmyn4z"&&(t.textContent=n),i=q(f);for(let o=0;o<r.length;o+=1)r[o].l(f);f.forEach(m),this.h()},h(){V(e,"class","svelte-1twz3mm")},m(h,f){N(h,e,f),s(e,t),s(e,i);for(let o=0;o<r.length;o+=1)r[o]&&r[o].m(e,null)},p(h,f){if(f&2048){a=me(h[11]);let o;for(o=0;o<a.length;o+=1){const d=Oe(h,a,o);r[o]?r[o].p(d,f):(r[o]=Te(d),r[o].c(),r[o].m(e,null))}for(;o<r.length;o+=1)r[o].d(1);r.length=a.length}},d(h){h&&m(e),Ue(r,h)}}}function tt(l){let e,t=l[22].basis+"",n;return{c(){e=u("Institutions in the same "),n=u(t)},l(i){e=_(i,"Institutions in the same "),n=_(i,t)},m(i,a){N(i,e,a),N(i,n,a)},p(i,a){a&2048&&t!==(t=i[22].basis+"")&&R(n,t)},d(i){i&&(m(e),m(n))}}}function lt(l){let e;return{c(){e=u("all other Institutions")},l(t){e=_(t,"all other Institutions")},m(t,n){N(t,e,n)},p:Ce,d(t){t&&m(e)}}}function He(l){let e,t=l[22].hierarchy+"",n;return{c(){e=u("when citing papers belong to the same "),n=u(t)},l(i){e=_(i,"when citing papers belong to the same "),n=_(i,t)},m(i,a){N(i,e,a),N(i,n,a)},p(i,a){a&2048&&t!==(t=i[22].hierarchy+"")&&R(n,t)},d(i){i&&(m(e),m(n))}}}function Te(l){let e,t,n,i,a=Q(l[23].nodeDivisor*l[23].baselineRate)+"",r,h,f,o=(l[23].specMetric*100).toFixed(2)+"",d,c,B;function S(E,v){return E[22].basis=="Global"?lt:tt}let k=S(l),y=k(l),g=l[22].hierarchy!="Global"&&He(l);return{c(){e=w("p"),t=u("Based on the impact rate of "),y.c(),n=U(),g&&g.c(),i=u(" we expect "),r=u(a),h=u(`
							citations, the true number is `),f=w("b"),d=u(o),c=u("%"),B=u(`
							of this
						`)},l(E){e=D(E,"P",{});var v=C(e);t=_(v,"Based on the impact rate of "),y.l(v),n=q(v),g&&g.l(v),i=_(v," we expect "),r=_(v,a),h=_(v,`
							citations, the true number is `),f=D(v,"B",{});var T=C(f);d=_(T,o),c=_(T,"%"),T.forEach(m),B=_(v,`
							of this
						`),v.forEach(m)},m(E,v){N(E,e,v),s(e,t),y.m(e,null),s(e,n),g&&g.m(e,null),s(e,i),s(e,r),s(e,h),s(e,f),s(f,d),s(f,c),s(e,B)},p(E,v){k===(k=S(E))&&y?y.p(E,v):(y.d(1),y=k(E),y&&(y.c(),y.m(e,n))),E[22].hierarchy!="Global"?g?g.p(E,v):(g=He(E),g.c(),g.m(e,i)):g&&(g.d(1),g=null),v&2048&&a!==(a=Q(E[23].nodeDivisor*E[23].baselineRate)+"")&&R(r,a),v&2048&&o!==(o=(E[23].specMetric*100).toFixed(2)+"")&&R(d,o)},d(E){E&&m(e),y.d(),g&&g.d()}}}function it(l){let e,t=l[1]!=null&&Ae(l);return{c(){t&&t.c(),e=de()},l(n){t&&t.l(n),e=de()},m(n,i){t&&t.m(n,i),N(n,e,i)},p(n,[i]){n[1]!=null?t?t.p(n,i):(t=Ae(n),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:Ce,o:Ce,d(n){n&&m(e),t&&t.d(n)}}}const Ke="Where the original paper was categorized as",Ge="Cited by paper published";function nt(l,e){const t=(l==null?void 0:l.weight)||0,n=((e==null?void 0:e.weight)||0)/Object.keys((e==null?void 0:e.children)||{}).length,i=t/n;return{num:t,comparison:n,rate:i,desc:Re(i)}}function Re(l){let e="Average";return l>1.2?e="High":l<.75&&(e="Low"),e}function ot(l,e,t){let n,i,a,r,h,f,o,d,c,{rootId:B}=e,{path:S}=e,{qcSpec:k}=e,{attributeLabels:y}=e,{weightedRoot:g}=e,{specBaselineOptions:E}=e,{levelOfDetail:v=0}=e;const T=Ge+" in",te=Ge+" by",Y={Country:T,Continent:T,Institution:te,Concept:Ke,SubConcept:Ke};function x(b,M){if((k==null?void 0:k.root_entity_type)===void 0)return[];const F=[{...M,name:y[k.root_entity_type][B].name}];for(let j=0;j<b.length;j++){const K=b.slice(0,j+1),A=Ze(K,M),L=Ne(K,y,k);F.push({...A||{weight:0},name:L})}return F}function le(b,M,F,j,K,A){const L=[];if(v>0)for(const Z of Object.keys(K)){const X=xe(Z);X.target==n&&L.push({baseKind:X,specMetricObj:Pe(b,X,M,F,j,K,A)})}return L}function O(b){const M=[];for(let F=0;F<S.length;F++){let j=b.bifurcations[F],K=b.bifurcations[F+1];if(F==S.length-1||j.resolver_id!=K.resolver_id){const A=j.attribute_kind,L=Ne(S.slice(0,F+1),y,b);M.push({entityType:A,prefixStr:Y[A],entityName:L})}}return M}return l.$$set=b=>{"rootId"in b&&t(0,B=b.rootId),"path"in b&&t(1,S=b.path),"qcSpec"in b&&t(2,k=b.qcSpec),"attributeLabels"in b&&t(3,y=b.attributeLabels),"weightedRoot"in b&&t(12,g=b.weightedRoot),"specBaselineOptions"in b&&t(13,E=b.specBaselineOptions),"levelOfDetail"in b&&t(4,v=b.levelOfDetail)},l.$$.update=()=>{var b;l.$$.dirty&6&&t(14,n=Qe(S,k)),l.$$.dirty&4098&&t(15,i=x(S||[],g)),l.$$.dirty&12303&&t(11,a=le(g,S,B,k,E,y)),l.$$.dirty&32768&&t(5,r=i[i.length-2]),l.$$.dirty&32768&&t(6,h=i[i.length-1]),l.$$.dirty&96&&t(10,f=nt(h,r)),l.$$.dirty&28687&&t(9,o=Pe(g,Ye[n],S,B,k,E,y)),l.$$.dirty&4&&t(8,d=O(k)),l.$$.dirty&6&&t(7,c=(b=k.bifurcations[S.length-1])==null?void 0:b.attribute_kind)},[B,S,k,y,v,r,h,c,d,o,f,a,g,E,n,i]}class ht extends Xe{constructor(e){super(),Je(this,e,ot,it,qe,{rootId:0,path:1,qcSpec:2,attributeLabels:3,weightedRoot:12,specBaselineOptions:13,levelOfDetail:4})}}export{ht as P};
