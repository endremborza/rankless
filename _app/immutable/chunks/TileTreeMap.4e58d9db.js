import{s as V,a as I,e as y,c as v,i as B,d as P,z as c,r as p,u as x,h as $,j as k,k as E,x as D}from"./scheduler.93ee367b.js";import{S as ee,i as ne,g as A,t as S,c as q,a as _,b as Q,d as R,m as U,e as W}from"./index.efb8b78c.js";import{e as G}from"./each.9cb10599.js";import{g as H}from"./style-util.8011bb2c.js";import{B as ie}from"./BrokenFittedText.b13c83dd.js";function J(n,i,f){const e=n.slice();return e[20]=i[f],e[22]=f,e}function fe(n){let i,f,e=G(n[14]),l=[];for(let o=0;o<e.length;o+=1)l[o]=K(J(n,e,o));const t=o=>S(l[o],1,1,()=>{l[o]=null});return{c(){for(let o=0;o<l.length;o+=1)l[o].c();i=y()},l(o){for(let s=0;s<l.length;s+=1)l[s].l(o);i=y()},m(o,s){for(let r=0;r<l.length;r+=1)l[r]&&l[r].m(o,s);B(o,i,s),f=!0},p(o,s){if(s&118270){e=G(o[14]);let r;for(r=0;r<e.length;r+=1){const m=J(o,e,r);l[r]?(l[r].p(m,s),_(l[r],1)):(l[r]=K(m),l[r].c(),_(l[r],1),l[r].m(i.parentNode,i))}for(A(),r=e.length;r<l.length;r+=1)t(r);q()}},i(o){if(!f){for(let s=0;s<e.length;s+=1)_(l[s]);f=!0}},o(o){l=l.filter(Boolean);for(let s=0;s<l.length;s+=1)S(l[s]);f=!1},d(o){o&&P(i),c(l,o)}}}function le(n){let i;return{c(){i=p("rect"),this.h()},l(f){i=x(f,"rect",{x:!0,y:!0,width:!0,height:!0,style:!0,class:!0}),$(i).forEach(P),this.h()},h(){k(i,"x",n[4]),k(i,"y",n[5]),k(i,"width",n[2]),k(i,"height",n[3]),E(i,"--crgb",H((n[6]+n[7])/2)),E(i,"--transition-ms",n[8]+"ms"),k(i,"class","svelte-x7l3w7")},m(f,e){B(f,i,e)},p(f,e){e&16&&k(i,"x",f[4]),e&32&&k(i,"y",f[5]),e&4&&k(i,"width",f[2]),e&8&&k(i,"height",f[3]),e&192&&E(i,"--crgb",H((f[6]+f[7])/2)),e&256&&E(i,"--transition-ms",f[8]+"ms")},i:D,o:D,d(f){f&&P(i)}}}function K(n){let i,f;return i=new se({props:{data:n[20].data,width:n[15](n[20],n[20].sizes[0],n[2],1),height:n[15](n[20],n[20].sizes[1],n[3],1),xOffset:n[15](n[20],n[20].offsets[0],n[4],n[20].offsets[0]+n[20].sizes[0]/2),yOffset:n[15](n[20],n[20].offsets[1],n[5],n[20].offsets[1]+n[20].sizes[1]/2),open:n[10].includes(n[20].name),colorStart:n[11]?n[6]+n[16]*n[22]:n[6],showText:n[11],colorEnd:n[11]?n[6]+n[16]*(n[22]+1):n[7],transitionMs:n[8],maxPad:n[15](n[20],n[1]*(n[20].sizes[0]/n[2]),n[1],0)}}),{c(){Q(i.$$.fragment)},l(e){R(i.$$.fragment,e)},m(e,l){U(i,e,l),f=!0},p(e,l){const t={};l&16384&&(t.data=e[20].data),l&49156&&(t.width=e[15](e[20],e[20].sizes[0],e[2],1)),l&49160&&(t.height=e[15](e[20],e[20].sizes[1],e[3],1)),l&49168&&(t.xOffset=e[15](e[20],e[20].offsets[0],e[4],e[20].offsets[0]+e[20].sizes[0]/2)),l&49184&&(t.yOffset=e[15](e[20],e[20].offsets[1],e[5],e[20].offsets[1]+e[20].sizes[1]/2)),l&17408&&(t.open=e[10].includes(e[20].name)),l&67648&&(t.colorStart=e[11]?e[6]+e[16]*e[22]:e[6]),l&2048&&(t.showText=e[11]),l&67776&&(t.colorEnd=e[11]?e[6]+e[16]*(e[22]+1):e[7]),l&256&&(t.transitionMs=e[8]),l&49158&&(t.maxPad=e[15](e[20],e[1]*(e[20].sizes[0]/e[2]),e[1],0)),i.$set(t)},i(e){f||(_(i.$$.fragment,e),f=!0)},o(e){S(i.$$.fragment,e),f=!1},d(e){W(i,e)}}}function L(n){let i,f;return i=new ie({props:{text:n[0].name,width:n[2]*(1-2*n[9]),height:n[3]*(1-2*n[9]),fadeMs:n[8],transMs:n[8],x:n[4]+n[2]*n[9],y:n[5]+n[3]-n[3]*n[9]}}),{c(){Q(i.$$.fragment)},l(e){R(i.$$.fragment,e)},m(e,l){U(i,e,l),f=!0},p(e,l){const t={};l&1&&(t.text=e[0].name),l&516&&(t.width=e[2]*(1-2*e[9])),l&520&&(t.height=e[3]*(1-2*e[9])),l&256&&(t.fadeMs=e[8]),l&256&&(t.transMs=e[8]),l&532&&(t.x=e[4]+e[2]*e[9]),l&552&&(t.y=e[5]+e[3]-e[3]*e[9]),i.$set(t)},i(e){f||(_(i.$$.fragment,e),f=!0)},o(e){S(i.$$.fragment,e),f=!1},d(e){W(i,e)}}}function te(n){let i,f,e,l,t;const o=[le,fe],s=[];function r(a,u){return a[13].length==0?0:1}i=r(n),f=s[i]=o[i](n);let m=!n[11]&&n[12]&&L(n);return{c(){f.c(),e=I(),m&&m.c(),l=y()},l(a){f.l(a),e=v(a),m&&m.l(a),l=y()},m(a,u){s[i].m(a,u),B(a,e,u),m&&m.m(a,u),B(a,l,u),t=!0},p(a,[u]){let g=i;i=r(a),i===g?s[i].p(a,u):(A(),S(s[g],1,1,()=>{s[g]=null}),q(),f=s[i],f?f.p(a,u):(f=s[i]=o[i](a),f.c()),_(f,1),f.m(e.parentNode,e)),!a[11]&&a[12]?m?(m.p(a,u),u&6144&&_(m,1)):(m=L(a),m.c(),_(m,1),m.m(l.parentNode,l)):m&&(A(),S(m,1,1,()=>{m=null}),q())},i(a){t||(_(f),_(m),t=!0)},o(a){S(f),S(m),t=!1},d(a){a&&(P(e),P(l)),s[i].d(a),m&&m.d(a)}}}function X(n,i,f,e,l,t,o){if(n.length==0)return[];if(n.length==1){const d=[f[0]-o,f[1]-o];return Math.min(...d)>0&&t.push({name:n[0].name,data:n[0],offsets:[i[0]+o,i[1]+o],sizes:d}),t}let s=n[0].weight,r=1,m;for(;r<n.length-1&&(m=n[r],s+=m.weight,r++,!(s>e/2)););const a=s/e*f[l],u=(d,b)=>d.map((w,M)=>M==l?w+b:w),g=u(i,a),T=u(f,-a),z=u(f,a-f[l]),C=(l+1)%i.length,O=(d,b,w,M)=>X(d,b,w,M,C,t,o);return r>0&&O(n.slice(0,r),i,z,s),r<n.length&&O(n.slice(r),g,T,e-s),t}function oe(n,i,f){let e,l,t,o,s,r,{data:m}=i,{maxPad:a=10}=i,{width:u=1e3}=i,{height:g=1e3}=i,{xOffset:T=0}=i,{yOffset:z=0}=i,{colorStart:C=0}=i,{colorEnd:O=1}=i,{transitionMs:d=400}=i,{edgePad:b=.08}=i,{expandedChild:w=void 0}=i,{openChildren:M=[]}=i,{open:N=!0}=i,{showText:F=!1}=i;return n.$$set=h=>{"data"in h&&f(0,m=h.data),"maxPad"in h&&f(1,a=h.maxPad),"width"in h&&f(2,u=h.width),"height"in h&&f(3,g=h.height),"xOffset"in h&&f(4,T=h.xOffset),"yOffset"in h&&f(5,z=h.yOffset),"colorStart"in h&&f(6,C=h.colorStart),"colorEnd"in h&&f(7,O=h.colorEnd),"transitionMs"in h&&f(8,d=h.transitionMs),"edgePad"in h&&f(9,b=h.edgePad),"expandedChild"in h&&f(17,w=h.expandedChild),"openChildren"in h&&f(10,M=h.openChildren),"open"in h&&f(11,N=h.open),"showText"in h&&f(12,F=h.showText)},n.$$.update=()=>{n.$$.dirty&1&&f(13,e=Object.values(m.children||{})),n.$$.dirty&8192&&f(19,l=e==null?void 0:e.reduce((h,j)=>h+j.weight,0)),n.$$.dirty&2050&&f(18,t=N?a:0),n.$$.dirty&8384&&f(16,o=(O-C)/e.length),n.$$.dirty&131072&&f(15,s=(h,j,Y,Z)=>w===void 0?j:w==h.name?Y:Z),n.$$.dirty&794684&&f(14,r=X(e||[],[T,z],[u,g],l,0,[],t))},[m,a,u,g,T,z,C,O,d,b,M,N,F,e,r,s,o,w,t,l]}class se extends ee{constructor(i){super(),ne(this,i,oe,te,V,{data:0,maxPad:1,width:2,height:3,xOffset:4,yOffset:5,colorStart:6,colorEnd:7,transitionMs:8,edgePad:9,expandedChild:17,openChildren:10,open:11,showText:12})}}export{se as T};
