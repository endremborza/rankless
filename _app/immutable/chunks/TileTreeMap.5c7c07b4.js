import{s as V,u as C,a as I,e as q,w as O,h as j,d as w,c as p,k as y,i as E,E as H,j as b,G as J}from"./scheduler.7e6b137c.js";import{S as x,i as $,g as K,t as P,c as L,a as z,b as Q,d as U,m as W,h as M,e as X}from"./index.27d0b62c.js";import{e as T}from"./each.79998848.js";import{g as F}from"./style-util.8011bb2c.js";import{B as Y,f as B}from"./BrokenFittedText.e7dcf9da.js";function G(n,e,l){const t=n.slice();return t[14]=e[l],t}function N(n,e,l){const t=n.slice();return t[14]=e[l],t[18]=l,t}function R(n){let e,l,t,o,r;return{c(){e=C("rect"),this.h()},l(f){e=O(f,"rect",{x:!0,y:!0,width:!0,height:!0,style:!0,class:!0}),j(e).forEach(w),this.h()},h(){b(e,"x",l=n[14].offsets[0]),b(e,"y",t=n[14].offsets[1]),b(e,"width",o=n[14].sizes[0]),b(e,"height",r=n[14].sizes[1]),y(e,"--crgb",F(n[7](n[18],n[3]))),b(e,"class","svelte-4vgltg")},m(f,i){E(f,e,i)},p(f,i){i&64&&l!==(l=f[14].offsets[0])&&b(e,"x",l),i&64&&t!==(t=f[14].offsets[1])&&b(e,"y",t),i&64&&o!==(o=f[14].sizes[0])&&b(e,"width",o),i&64&&r!==(r=f[14].sizes[1])&&b(e,"height",r),i&8&&y(e,"--crgb",F(f[7](f[18],f[3])))},d(f){f&&w(e)}}}function ee(n){let e,l,t,o,r;return l=new Y({props:{text:n[0].name,width:n[1],height:n[2]}}),{c(){e=C("g"),Q(l.$$.fragment),this.h()},l(f){e=O(f,"g",{transform:!0});var i=j(e);U(l.$$.fragment,i),i.forEach(w),this.h()},h(){b(e,"transform",t="translate(0, "+n[2]+")")},m(f,i){E(f,e,i),W(l,e,null),r=!0},p(f,i){n=f;const s={};i&1&&(s.text=n[0].name),i&2&&(s.width=n[1]),i&4&&(s.height=n[2]),l.$set(s),(!r||i&4&&t!==(t="translate(0, "+n[2]+")"))&&b(e,"transform",t)},i(f){r||(z(l.$$.fragment,f),f&&J(()=>{r&&(o||(o=M(e,B,{duration:n[4]},!0)),o.run(1))}),r=!0)},o(f){P(l.$$.fragment,f),f&&(o||(o=M(e,B,{duration:n[4]},!1)),o.run(0)),r=!1},d(f){f&&w(e),X(l),f&&o&&o.end()}}}function te(n){let e,l,t,o=T(n[6]),r=[];for(let i=0;i<o.length;i+=1)r[i]=D(G(n,o,i));const f=i=>P(r[i],1,1,()=>{r[i]=null});return{c(){e=C("g");for(let i=0;i<r.length;i+=1)r[i].c()},l(i){e=O(i,"g",{});var s=j(e);for(let h=0;h<r.length;h+=1)r[h].l(s);s.forEach(w)},m(i,s){E(i,e,s);for(let h=0;h<r.length;h+=1)r[h]&&r[h].m(e,null);t=!0},p(i,s){if(n=i,s&96){o=T(n[6]);let h;for(h=0;h<o.length;h+=1){const c=G(n,o,h);r[h]?(r[h].p(c,s),z(r[h],1)):(r[h]=D(c),r[h].c(),z(r[h],1),r[h].m(e,null))}for(K(),h=o.length;h<r.length;h+=1)f(h);L()}},i(i){if(!t){for(let s=0;s<o.length;s+=1)z(r[s]);i&&J(()=>{t&&(l||(l=M(e,B,{duration:n[4]},!0)),l.run(1))}),t=!0}},o(i){r=r.filter(Boolean);for(let s=0;s<r.length;s+=1)P(r[s]);i&&(l||(l=M(e,B,{duration:n[4]},!1)),l.run(0)),t=!1},d(i){i&&w(e),H(r,i),i&&l&&l.end()}}}function D(n){let e,l;return e=new Y({props:{text:n[14].name,width:n[14].sizes[0]*(1-2*n[5]),height:n[14].sizes[1]*(1-2*n[5]),x:n[14].offsets[0]+n[14].sizes[0]*n[5],y:n[14].offsets[1]+n[14].sizes[1]*(1-n[5])}}),{c(){Q(e.$$.fragment)},l(t){U(e.$$.fragment,t)},m(t,o){W(e,t,o),l=!0},p(t,o){const r={};o&64&&(r.text=t[14].name),o&96&&(r.width=t[14].sizes[0]*(1-2*t[5])),o&96&&(r.height=t[14].sizes[1]*(1-2*t[5])),o&96&&(r.x=t[14].offsets[0]+t[14].sizes[0]*t[5]),o&96&&(r.y=t[14].offsets[1]+t[14].sizes[1]*(1-t[5])),e.$set(r)},i(t){l||(z(e.$$.fragment,t),l=!0)},o(t){P(e.$$.fragment,t),l=!1},d(t){X(e,t)}}}function ne(n){let e,l,t,o,r,f,i=T(n[6]),s=[];for(let a=0;a<i.length;a+=1)s[a]=R(N(n,i,a));const h=[te,ee],c=[];function k(a,_){return a[3]?1:0}return t=k(n),o=c[t]=h[t](n),{c(){e=C("g");for(let a=0;a<s.length;a+=1)s[a].c();l=I(),o.c(),r=q(),this.h()},l(a){e=O(a,"g",{style:!0});var _=j(e);for(let g=0;g<s.length;g+=1)s[g].l(_);_.forEach(w),l=p(a),o.l(a),r=q(),this.h()},h(){y(e,"--transition-ms",n[4]+"ms")},m(a,_){E(a,e,_);for(let g=0;g<s.length;g+=1)s[g]&&s[g].m(e,null);E(a,l,_),c[t].m(a,_),E(a,r,_),f=!0},p(a,[_]){if(_&200){i=T(a[6]);let m;for(m=0;m<i.length;m+=1){const S=N(a,i,m);s[m]?s[m].p(S,_):(s[m]=R(S),s[m].c(),s[m].m(e,null))}for(;m<s.length;m+=1)s[m].d(1);s.length=i.length}(!f||_&16)&&y(e,"--transition-ms",a[4]+"ms");let g=t;t=k(a),t===g?c[t].p(a,_):(K(),P(c[g],1,1,()=>{c[g]=null}),L(),o=c[t],o?o.p(a,_):(o=c[t]=h[t](a),o.c()),z(o,1),o.m(r.parentNode,r))},i(a){f||(z(o),f=!0)},o(a){P(o),f=!1},d(a){a&&(w(e),w(l),w(r)),H(s,a),c[t].d(a)}}}function Z(n,e,l,t,o,r,f){if(n.length==1){const u=l.map(d=>d-f);return Math.min(...u)>0&&r.push({name:n[0].name,offsets:e.map(d=>d+f),sizes:u}),r}let i=n[0].weight,s=1,h;for(;s<n.length-1&&(h=n[s],i+=h.weight,s++,!(i>t/2)););const c=i/t*l[o],k=(u,d)=>u.map((v,A)=>A==o?v+d:v),a=k(e,c),_=k(l,-c),g=k(l,c-l[o]),m=(o+1)%e.length,S=(u,d,v,A)=>Z(u,d,v,A,m,r,f);return s>0&&S(n.slice(0,s),e,g,i),s<n.length&&S(n.slice(s),a,_,t-i),r}function ie(n,e,l){let t,o,r,f,{data:i}=e,{maxPad:s=10}=e,{width:h=1e3}=e,{height:c=1e3}=e,{combined:k=!1}=e,{colorStart:a=0}=e,{colorEnd:_=1}=e,{transitionMs:g=400}=e,{edgePad:m=.08}=e;function S(u,d){return d?(a+_)/2:a+(_-a)*(u/t.length)}return n.$$set=u=>{"data"in u&&l(0,i=u.data),"maxPad"in u&&l(8,s=u.maxPad),"width"in u&&l(1,h=u.width),"height"in u&&l(2,c=u.height),"combined"in u&&l(3,k=u.combined),"colorStart"in u&&l(9,a=u.colorStart),"colorEnd"in u&&l(10,_=u.colorEnd),"transitionMs"in u&&l(4,g=u.transitionMs),"edgePad"in u&&l(5,m=u.edgePad)},n.$$.update=()=>{n.$$.dirty&1&&l(13,t=Object.values(i.children||{})),n.$$.dirty&8192&&l(12,o=t==null?void 0:t.reduce((u,d)=>u+d.weight,0)),n.$$.dirty&264&&l(11,r=k?0:s),n.$$.dirty&14342&&l(6,f=Z(t||[],[0,0],[h,c],o,0,[],r))},[i,h,c,k,g,m,f,S,s,a,_,r,o,t]}class ae extends x{constructor(e){super(),$(this,e,ie,ne,V,{data:0,maxPad:8,width:1,height:2,combined:3,colorStart:9,colorEnd:10,transitionMs:4,edgePad:5})}}export{ae as T};
