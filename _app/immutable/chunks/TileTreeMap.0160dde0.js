import{s as V,a as I,e as y,c as v,i as B,d as E,E as c,u as p,w as x,h as $,j as k,k as z,C as D}from"./scheduler.c71c511d.js";import{S as ee,i as ne,g as A,t as S,c as q,a as _,b as Q,d as R,m as U,e as W}from"./index.7d58e6c4.js";import{e as G}from"./each.19beb08f.js";import{g as H}from"./style-util.8011bb2c.js";import{B as ie}from"./BrokenFittedText.a5c3f9b1.js";function J(n,i,l){const e=n.slice();return e[20]=i[l],e[22]=l,e}function le(n){let i,l,e=G(n[14]),t=[];for(let o=0;o<e.length;o+=1)t[o]=K(J(n,e,o));const f=o=>S(t[o],1,1,()=>{t[o]=null});return{c(){for(let o=0;o<t.length;o+=1)t[o].c();i=y()},l(o){for(let r=0;r<t.length;r+=1)t[r].l(o);i=y()},m(o,r){for(let a=0;a<t.length;a+=1)t[a]&&t[a].m(o,r);B(o,i,r),l=!0},p(o,r){if(r&118270){e=G(o[14]);let a;for(a=0;a<e.length;a+=1){const m=J(o,e,a);t[a]?(t[a].p(m,r),_(t[a],1)):(t[a]=K(m),t[a].c(),_(t[a],1),t[a].m(i.parentNode,i))}for(A(),a=e.length;a<t.length;a+=1)f(a);q()}},i(o){if(!l){for(let r=0;r<e.length;r+=1)_(t[r]);l=!0}},o(o){t=t.filter(Boolean);for(let r=0;r<t.length;r+=1)S(t[r]);l=!1},d(o){o&&E(i),c(t,o)}}}function te(n){let i;return{c(){i=p("rect"),this.h()},l(l){i=x(l,"rect",{x:!0,y:!0,width:!0,height:!0,style:!0,class:!0}),$(i).forEach(E),this.h()},h(){k(i,"x",n[4]),k(i,"y",n[5]),k(i,"width",n[2]),k(i,"height",n[3]),z(i,"--crgb",H((n[6]+n[7])/2)),z(i,"--transition-ms",n[8]+"ms"),k(i,"class","svelte-x7l3w7")},m(l,e){B(l,i,e)},p(l,e){e&16&&k(i,"x",l[4]),e&32&&k(i,"y",l[5]),e&4&&k(i,"width",l[2]),e&8&&k(i,"height",l[3]),e&192&&z(i,"--crgb",H((l[6]+l[7])/2)),e&256&&z(i,"--transition-ms",l[8]+"ms")},i:D,o:D,d(l){l&&E(i)}}}function K(n){let i,l;return i=new re({props:{data:n[20].data,width:n[15](n[20],n[20].sizes[0],n[2],1),height:n[15](n[20],n[20].sizes[1],n[3],1),xOffset:n[15](n[20],n[20].offsets[0],n[4],n[4]),yOffset:n[15](n[20],n[20].offsets[1],n[5],n[5]),open:n[10].includes(n[20].name),colorStart:n[11]?n[6]+n[16]*n[22]:n[6],showText:n[11],colorEnd:n[11]?n[6]+n[16]*(n[22]+1):n[7],transitionMs:n[8],maxPad:n[15](n[20],n[1]*(n[20].sizes[0]/n[2]),n[1],0)}}),{c(){Q(i.$$.fragment)},l(e){R(i.$$.fragment,e)},m(e,t){U(i,e,t),l=!0},p(e,t){const f={};t&16384&&(f.data=e[20].data),t&49156&&(f.width=e[15](e[20],e[20].sizes[0],e[2],1)),t&49160&&(f.height=e[15](e[20],e[20].sizes[1],e[3],1)),t&49168&&(f.xOffset=e[15](e[20],e[20].offsets[0],e[4],e[4])),t&49184&&(f.yOffset=e[15](e[20],e[20].offsets[1],e[5],e[5])),t&17408&&(f.open=e[10].includes(e[20].name)),t&67648&&(f.colorStart=e[11]?e[6]+e[16]*e[22]:e[6]),t&2048&&(f.showText=e[11]),t&67776&&(f.colorEnd=e[11]?e[6]+e[16]*(e[22]+1):e[7]),t&256&&(f.transitionMs=e[8]),t&49158&&(f.maxPad=e[15](e[20],e[1]*(e[20].sizes[0]/e[2]),e[1],0)),i.$set(f)},i(e){l||(_(i.$$.fragment,e),l=!0)},o(e){S(i.$$.fragment,e),l=!1},d(e){W(i,e)}}}function L(n){let i,l;return i=new ie({props:{text:n[0].name,width:n[2]*(1-2*n[9]),height:n[3]*(1-2*n[9]),fadeMs:n[8],transMs:n[8],x:n[4]+n[2]*n[9],y:n[5]+n[3]-n[3]*n[9]}}),{c(){Q(i.$$.fragment)},l(e){R(i.$$.fragment,e)},m(e,t){U(i,e,t),l=!0},p(e,t){const f={};t&1&&(f.text=e[0].name),t&516&&(f.width=e[2]*(1-2*e[9])),t&520&&(f.height=e[3]*(1-2*e[9])),t&256&&(f.fadeMs=e[8]),t&256&&(f.transMs=e[8]),t&532&&(f.x=e[4]+e[2]*e[9]),t&552&&(f.y=e[5]+e[3]-e[3]*e[9]),i.$set(f)},i(e){l||(_(i.$$.fragment,e),l=!0)},o(e){S(i.$$.fragment,e),l=!1},d(e){W(i,e)}}}function fe(n){let i,l,e,t,f;const o=[te,le],r=[];function a(s,u){return s[13].length==0?0:1}i=a(n),l=r[i]=o[i](n);let m=!n[11]&&n[12]&&L(n);return{c(){l.c(),e=I(),m&&m.c(),t=y()},l(s){l.l(s),e=v(s),m&&m.l(s),t=y()},m(s,u){r[i].m(s,u),B(s,e,u),m&&m.m(s,u),B(s,t,u),f=!0},p(s,[u]){let g=i;i=a(s),i===g?r[i].p(s,u):(A(),S(r[g],1,1,()=>{r[g]=null}),q(),l=r[i],l?l.p(s,u):(l=r[i]=o[i](s),l.c()),_(l,1),l.m(e.parentNode,e)),!s[11]&&s[12]?m?(m.p(s,u),u&6144&&_(m,1)):(m=L(s),m.c(),_(m,1),m.m(t.parentNode,t)):m&&(A(),S(m,1,1,()=>{m=null}),q())},i(s){f||(_(l),_(m),f=!0)},o(s){S(l),S(m),f=!1},d(s){s&&(E(e),E(t)),r[i].d(s),m&&m.d(s)}}}function X(n,i,l,e,t,f,o){if(n.length==0)return[];if(n.length==1){const d=[l[0]-o,l[1]-o];return Math.min(...d)>0&&f.push({name:n[0].name,data:n[0],offsets:[i[0]+o,i[1]+o],sizes:d}),f}let r=n[0].weight,a=1,m;for(;a<n.length-1&&(m=n[a],r+=m.weight,a++,!(r>e/2)););const s=r/e*l[t],u=(d,b)=>d.map((w,M)=>M==t?w+b:w),g=u(i,s),T=u(l,-s),C=u(l,s-l[t]),P=(t+1)%i.length,O=(d,b,w,M)=>X(d,b,w,M,P,f,o);return a>0&&O(n.slice(0,a),i,C,r),a<n.length&&O(n.slice(a),g,T,e-r),f}function oe(n,i,l){let e,t,f,o,r,a,{data:m}=i,{maxPad:s=10}=i,{width:u=1e3}=i,{height:g=1e3}=i,{xOffset:T=0}=i,{yOffset:C=0}=i,{colorStart:P=0}=i,{colorEnd:O=1}=i,{transitionMs:d=400}=i,{edgePad:b=.08}=i,{expandedChild:w=void 0}=i,{openChildren:M=[]}=i,{open:N=!0}=i,{showText:F=!1}=i;return n.$$set=h=>{"data"in h&&l(0,m=h.data),"maxPad"in h&&l(1,s=h.maxPad),"width"in h&&l(2,u=h.width),"height"in h&&l(3,g=h.height),"xOffset"in h&&l(4,T=h.xOffset),"yOffset"in h&&l(5,C=h.yOffset),"colorStart"in h&&l(6,P=h.colorStart),"colorEnd"in h&&l(7,O=h.colorEnd),"transitionMs"in h&&l(8,d=h.transitionMs),"edgePad"in h&&l(9,b=h.edgePad),"expandedChild"in h&&l(17,w=h.expandedChild),"openChildren"in h&&l(10,M=h.openChildren),"open"in h&&l(11,N=h.open),"showText"in h&&l(12,F=h.showText)},n.$$.update=()=>{n.$$.dirty&1&&l(13,e=Object.values(m.children||{})),n.$$.dirty&8192&&l(19,t=e==null?void 0:e.reduce((h,j)=>h+j.weight,0)),n.$$.dirty&2050&&l(18,f=N?s:0),n.$$.dirty&8384&&l(16,o=(O-P)/e.length),n.$$.dirty&131072&&l(15,r=(h,j,Y,Z)=>w===void 0?j:w==h.name?Y:Z),n.$$.dirty&794684&&l(14,a=X(e||[],[T,C],[u,g],t,0,[],f))},[m,s,u,g,T,C,P,O,d,b,M,N,F,e,a,r,o,w,f,t]}class re extends ee{constructor(i){super(),ne(this,i,oe,fe,V,{data:0,maxPad:1,width:2,height:3,xOffset:4,yOffset:5,colorStart:6,colorEnd:7,transitionMs:8,edgePad:9,expandedChild:17,openChildren:10,open:11,showText:12})}}export{re as T};
